SET IRMethod, name = request_cancelled instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_flow 
		 6: RECEIVEARG def_token 
		 7: 
		 8: token->[] def_%v_3 token[2.6,] 	 SYMBOL:community_id,	 ARGS:Symbol,
		 9: token->[] def_%v_4 token[2.6,2.8,] 	 SYMBOL:transaction_id,	 ARGS:Symbol,
		 10: HASH-cid-tx_id- def_%v_5 %v_3[2.8,] %v_4[2.9,] 
		 11: %self->delete_transaction def_%v_6 %self[2.0,] %v_5[2.10,] 	 SYMBOL:	 ARGS:%v_5,
		 12: RETURN %v_6[2.11,] %self[2.0,2.11,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = payment_updated instanceMethod = true
BB 1
	outgoing: 34 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_flow 
		 6: RECEIVEARG def_payment 
		 7: 
		 8: (MarketplaceService) def_%v_3 
		 9: (inherit Transaction) def_%v_4 %v_3[2.8,] 
		 10: %v_4[2.9,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.8,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: (inherit Query) def_%v_5 %v_4[3.0,2.9,] 
		 1: %v_5[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,2.9,] 	 SYMBOL:Query,	 ARGS:Symbol,
BB 6
	outgoing: 7 32 
	datadep: 
	instructions:
		 0: payment->[] def_%v_6 payment[2.6,] 	 SYMBOL:transaction_id,	 ARGS:Symbol,
		 1: %v_5->transaction def_%v_7 %v_5[5.0,4.0,] %v_6[6.0,] 	 SYMBOL:	 ARGS:%v_6,
		 2: COPY TYPE_PASS def_tx %v_7[6.1,] 
		 3: 
		 4: BRANCH %v_7[6.1,] 
BB 7
	outgoing: 8 16 
	datadep: 
	instructions:
		 0: 
		 1: %self->transition_type def_%v_8 %self[2.0,] tx[6.2,] payment[2.6,] 	 SYMBOL:	 ARGS:tx,payment,
		 2: def_%v_10 %v_8[7.1,] 
		 3: BRANCH %v_10[7.2,] 
BB 8
	outgoing: 9 17 
	datadep: 
	instructions:
		 0: def_%v_11 %v_8[7.1,] 
		 1: BRANCH %v_11[8.0,] 
BB 9
	outgoing: 10 18 
	datadep: 
	instructions:
		 0: def_%v_12 %v_8[7.1,] 
		 1: BRANCH %v_12[9.0,] 
BB 10
	outgoing: 11 19 
	datadep: 
	instructions:
		 0: def_%v_13 %v_8[7.1,] 
		 1: BRANCH %v_13[10.0,] 
BB 11
	outgoing: 12 20 
	datadep: 
	instructions:
		 0: def_%v_14 %v_8[7.1,] 
		 1: BRANCH %v_14[11.0,] 
BB 12
	outgoing: 13 21 
	datadep: 
	instructions:
		 0: def_%v_15 %v_8[7.1,] 
		 1: BRANCH %v_15[12.0,] 
BB 13
	outgoing: 14 28 
	datadep: 
	instructions:
		 0: def_%v_16 %v_8[7.1,] 
		 1: BRANCH %v_16[13.0,] 
BB 14
	outgoing: 15 29 
	datadep: 
	instructions:
		 0: def_%v_17 %v_8[7.1,] 
		 1: BRANCH %v_17[14.0,] 
BB 15
	outgoing: 31 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_9 
		 1: 
BB 16
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: %self->initiated_to_preauthorized def_%v_18 %self[2.0,] tx[6.2,] 	 SYMBOL:	 ARGS:tx,
		 2: COPY TYPE_PASS def_%v_9 %v_18[16.1,] 
		 3: 
BB 17
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: tx->[] def_%v_19 tx[6.2,] 	 SYMBOL:community_id,	 ARGS:Symbol,
		 2: tx->[] def_%v_20 tx[17.1,6.2,] 	 SYMBOL:id,	 ARGS:Symbol,
		 3: HASH-cid-tx_id- def_%v_21 %v_19[17.1,] %v_20[17.2,] 
		 4: %self->delete_transaction def_%v_22 %self[2.0,] %v_21[17.3,] 	 SYMBOL:	 ARGS:%v_21,
		 5: COPY TYPE_PASS def_%v_9 %v_22[17.4,] 
		 6: 
BB 18
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: %self->preauthorized_to_paid def_%v_23 %self[2.0,] tx[6.2,] 	 SYMBOL:	 ARGS:tx,
		 2: COPY TYPE_PASS def_%v_9 %v_23[18.1,] 
		 3: 
BB 19
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: payment->[] def_%v_24 payment[2.6,] 	 SYMBOL:pending_reason,	 ARGS:Symbol,
		 2: %self->preauthorized_to_pending_ext def_%v_25 %self[2.0,] tx[6.2,] %v_24[19.1,] 	 SYMBOL:	 ARGS:tx,%v_24,
		 3: COPY TYPE_PASS def_%v_9 %v_25[19.2,] 
		 4: 
BB 20
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: %self->pending_ext_to_paid def_%v_26 %self[2.0,] tx[6.2,] 	 SYMBOL:	 ARGS:tx,
		 2: COPY TYPE_PASS def_%v_9 %v_26[20.1,] 
		 3: 
BB 21
	outgoing: 22 23 
	datadep: 
	instructions:
		 0: 
		 1: flow->== def_%v_27 flow[2.5,] 	 SYMBOL:success,	 ARGS:Symbol,
		 2: BRANCH %v_27[21.1,] 
BB 22
	outgoing: 24 
	datadep: 
	instructions:
		 0: %self->preauthorized_to_rejected def_%v_28 %self[2.0,] tx[6.2,] 	 SYMBOL:	 ARGS:tx,
		 1: 
BB 23
	outgoing: 24 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_28 
BB 24
	outgoing: 25 26 
	datadep: 
	instructions:
		 0: 
		 1: flow->== def_%v_29 flow[2.5,] 	 SYMBOL:error,	 ARGS:Symbol,
		 2: BRANCH %v_29[24.1,] 
BB 25
	outgoing: 27 
	datadep: 
	instructions:
		 0: %self->preauthorized_to_errored def_%v_30 %self[2.0,] tx[6.2,] 	 SYMBOL:	 ARGS:tx,
		 1: 
BB 26
	outgoing: 27 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_30 
BB 27
	outgoing: 31 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%v_9 %v_30[26.0,25.0,] 
		 1: 
BB 28
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: payment->[] def_%v_31 payment[2.6,] 	 SYMBOL:payment_status,	 ARGS:Symbol,
		 2: %self->preauthorized_to_rejected def_%v_32 %self[2.0,] tx[6.2,] %v_31[28.1,] 	 SYMBOL:	 ARGS:tx,%v_31,
		 3: COPY TYPE_PASS def_%v_9 %v_32[28.2,] 
		 4: 
BB 29
	outgoing: 31 
	datadep: 
	instructions:
		 0: 
		 1: payment->[] def_%v_33 payment[2.6,] 	 SYMBOL:payment_status,	 ARGS:Symbol,
		 2: %self->pending_ext_to_denied def_%v_34 %self[2.0,] tx[6.2,] %v_33[29.1,] 	 SYMBOL:	 ARGS:tx,%v_33,
		 3: COPY TYPE_PASS def_%v_9 %v_34[29.2,] 
		 4: 
BB 31
	outgoing: 34 
	datadep: 
	instructions:
		 0: RETURN %v_9[16.2,17.5,18.2,19.3,20.2,27.0,28.3,29.3,15.0,] %self[2.0,] 
BB 32
	outgoing: 34 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 34
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = update_transaction_details instanceMethod = true
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_flow 
		 6: RECEIVEARG def_details 
		 7: 
		 8: details->delete def_%v_3 details[2.6,] 	 SYMBOL:community_id,	 ARGS:Symbol,
		 9: COPY TYPE_PASS def_community_id %v_3[2.8,] 
		 10: 
		 11: details->delete def_%v_4 details[2.6,2.8,] 	 SYMBOL:transaction_id,	 ARGS:Symbol,
		 12: COPY TYPE_PASS def_transaction_id %v_4[2.11,] 
		 13: 
		 14: %self->shipping_fields_present? def_%v_5 %self[2.0,] details[2.6,2.8,2.11,] 	 SYMBOL:	 ARGS:details,
		 15: BRANCH %v_5[2.14,] 
BB 3
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: (TransactionStore) def_%v_6 
		 2: HASH-community_id-transaction_id-addr- def_%v_7 community_id[2.9,] transaction_id[2.12,] details[2.6,] 
		 3: %v_6->upsert_shipping_address def_%v_8 %v_6[3.1,] %v_7[3.2,] 	 SYMBOL:	 ARGS:%v_7,
		 4: RETURN %v_8[3.3,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = shipping_fields_present? instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_details 
		 6: 
		 7: details->except def_%v_3 details[2.5,] 	 SYMBOL:status,	 ARGS:Symbol,
		 8: %v_3->values def_%v_4 %v_3[2.7,] 	 SYMBOL:	 ARGS:
		 9: %v_4->any? def_%v_5 %v_4[2.8,] 	 SYMBOL:	 ARGS:
		 10: RETURN %v_5[2.9,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = transition_type instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: RECEIVEARG def_payment 
		 7: 
		 8: payment->[] def_%v_3 payment[2.6,] 	 SYMBOL:payment_status,	 ARGS:Symbol,
		 9: COPY TYPE_PASS def_payment_status %v_3[2.8,] 
		 10: 
		 11: payment->[] def_%v_4 payment[2.6,2.8,] 	 SYMBOL:pending_reason,	 ARGS:Symbol,
		 12: COPY TYPE_PASS def_pending_reason %v_4[2.11,] 
		 13: 
		 14: tx->[] def_%v_5 tx[2.5,] 	 SYMBOL:status,	 ARGS:Symbol,
		 15: %v_5->to_sym def_%v_6 %v_5[2.14,] 	 SYMBOL:	 ARGS:
		 16: COPY TYPE_PASS def_tx_state %v_6[2.15,] 
		 17: 
		 18: (TRANSITIONS) def_%v_7 
		 19: COPY TYPE_Array def_%v_8 %v_6[2.15,] payment_status[2.9,] pending_reason[2.12,] 
		 20: %self->first_matching_transition def_%v_9 %self[2.0,] %v_7[2.18,] %v_8[2.19,] 	 SYMBOL:	 ARGS:%v_7,%v_8,
		 21: def_%v_10 %v_9[2.20,] 
		 22: def_%v_11 %v_10[2.21,] 
		 23: def_%v_12 %v_10[2.21,] 
		 24: COPY TYPE_PASS def_transition_key %v_11[2.22,] 
		 25: COPY TYPE_PASS def__ %v_12[2.23,] 
		 26: 
		 27: %self->Maybe def_%v_13 %self[2.0,2.20,] %v_11[2.22,] 	 SYMBOL:	 ARGS:transition_key,
		 28: %v_13->or_else def_%v_14 %v_13[2.27,] 	 SYMBOL:unknown_transition,	 ARGS:Symbol,
		 29: RETURN %v_14[2.28,] %self[2.0,2.20,2.27,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = first_matching_transition instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_transitions 
		 6: RECEIVEARG def_val 
		 7: 
		 8: transitions->find def_%v_3 transitions[2.5,] %self[2.0,] 	 SYMBOL:	 ARGS:transitions,
CLOSURE BEGIN: match[] val[2.6,] %self[2.0,] p1[] p2[] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_%cl_1_1 
		 3: def_%cl_1_2 %cl_1_1[2.2,] 
		 4: def__ %cl_1_2[2.3,] 
		 5: def_match %cl_1_2[2.3,] 
		 6: COPY TYPE_CurrentScope def_%current_scope 
		 7: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: match->zip def_%cl_1_5 match[2.5,] val[] 	 SYMBOL:	 ARGS:val,
		 2: %cl_1_5->all? def_%cl_1_6 %cl_1_5[3.1,] %self[2.0,] 	 SYMBOL:	 ARGS:%cl_1_5,
CLOSURE BEGIN: p1[] p2[] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_2_0 
		 2: RECEIVEARG def_%cl_2_1 
		 3: def_%cl_2_2 %cl_2_1[2.2,] 
		 4: def_p1 %cl_2_2[2.3,] 
		 5: def_p2 %cl_2_2[2.3,] 
		 6: COPY TYPE_CurrentScope def_%current_scope 
		 7: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: p1->== def_%cl_2_5 p1[2.4,] p2[2.5,] 	 SYMBOL:	 ARGS:p2,
		 2: RETURN %cl_2_5[3.1,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_2_6 
		 1: def_%cl_2_7 %cl_2_6[4.0,] 
		 2: RETURN %cl_2_7[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: p2[2.5,] 
		 3: RETURN %cl_1_6[3.2,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_7 
		 1: def_%cl_1_8 %cl_1_7[4.0,] 
		 2: RETURN %cl_1_8[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: match[2.5,] 
		 9: RETURN %v_3[2.8,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = preauthorized_to_errored instanceMethod = true
BB 1
	outgoing: 7 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: 
		 7: (MarketplaceService) def_%v_3 
		 8: (inherit Transaction) def_%v_4 %v_3[2.7,] 
		 9: %v_4[2.8,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.7,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_5 %v_4[3.0,2.8,] 
		 1: %v_5[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,2.8,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: tx->[] def_%v_6 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: COPY TYPE_StringLiteral "errored" def_%v_7 
		 2: %v_5->transition_to def_%v_8 %v_5[5.0,4.0,] %v_6[6.0,] %v_7[6.1,] 	 SYMBOL:	 ARGS:%v_6,%v_7,
		 3: RETURN %v_8[6.2,] %self[2.0,] 
BB 7
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = preauthorized_to_rejected instanceMethod = true
BB 1
	outgoing: 12 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: RECEIVECONSTARG def_payment_status 
		 7: payment_status[2.6,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_payment_status 
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: 
		 1: BRANCH payment_status[3.0,2.6,] 
BB 5
	outgoing: 7 
	datadep: 
	instructions:
		 0: HASH-paypal_payment_status- def_%v_3 payment_status[3.0,2.6,] 
		 1: 
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_3 
BB 7
	outgoing: 8 9 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_metadata %v_3[6.0,5.0,] 
		 1: 
		 2: (MarketplaceService) def_%v_4 
		 3: (inherit Transaction) def_%v_5 %v_4[7.2,] 
		 4: %v_5[7.3,] 
BB 8
	outgoing: 9 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[7.2,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 9
	outgoing: 10 11 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_6 %v_5[8.0,7.3,] 
		 1: %v_6[9.0,] 
BB 10
	outgoing: 11 
	datadep: 
	instructions:
		 0: %v_5->const_missing def_%v_6 %v_5[8.0,7.3,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 11
	outgoing: 12 
	datadep: 
	instructions:
		 0: tx->[] def_%v_7 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: COPY TYPE_StringLiteral "rejected" def_%v_8 
		 2: %v_6->transition_to def_%v_9 %v_6[10.0,9.0,] %v_7[11.0,] %v_8[11.1,] metadata[7.0,] 	 SYMBOL:	 ARGS:%v_7,%v_8,metadata,
		 3: RETURN %v_9[11.2,] %self[2.0,] 
BB 12
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = pending_ext_to_denied instanceMethod = true
BB 1
	outgoing: 7 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: RECEIVEARG def_payment_status 
		 7: 
		 8: (MarketplaceService) def_%v_3 
		 9: (inherit Transaction) def_%v_4 %v_3[2.8,] 
		 10: %v_4[2.9,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.8,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_5 %v_4[3.0,2.9,] 
		 1: %v_5[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,2.9,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: tx->[] def_%v_6 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: COPY TYPE_StringLiteral "rejected" def_%v_7 
		 2: HASH-paypal_payment_status- def_%v_8 payment_status[2.6,] 
		 3: %v_5->transition_to def_%v_9 %v_5[5.0,4.0,] %v_6[6.0,] %v_7[6.1,] %v_8[6.2,] 	 SYMBOL:	 ARGS:%v_6,%v_7,%v_8,
		 4: RETURN %v_9[6.3,] %self[2.0,] 
BB 7
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = initiated_to_preauthorized instanceMethod = true
BB 1
	outgoing: 7 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: 
		 7: (MarketplaceService) def_%v_3 
		 8: (inherit Transaction) def_%v_4 %v_3[2.7,] 
		 9: %v_4[2.8,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.7,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_5 %v_4[3.0,2.8,] 
		 1: %v_5[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,2.8,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: tx->[] def_%v_6 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: %v_5->transition_to def_%v_7 %v_5[5.0,4.0,] %v_6[6.0,] 	 SYMBOL:preauthorized,	 ARGS:%v_6,Symbol,
		 2: RETURN %v_7[6.1,] %self[2.0,] 
BB 7
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = preauthorized_to_paid instanceMethod = true
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: 
		 7: (TransactionService) def_%v_3 
		 8: (inherit Transaction) def_%v_4 %v_3[2.7,] 
		 9: %v_4[2.8,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.7,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: tx->[] def_%v_5 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: %v_4->charge_commission def_%v_6 %v_4[3.0,2.8,] %v_5[4.0,] 	 SYMBOL:	 ARGS:%v_5,
		 2: 
		 3: (MarketplaceService) def_%v_7 
		 4: (inherit Transaction) def_%v_8 %v_7[4.3,] 
		 5: %v_8[4.4,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_7->const_missing def_%v_8 %v_7[4.3,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 6
	outgoing: 7 8 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_9 %v_8[5.0,4.4,] 
		 1: %v_9[6.0,] 
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: %v_8->const_missing def_%v_9 %v_8[5.0,4.4,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 8
	outgoing: 9 
	datadep: 
	instructions:
		 0: tx->[] def_%v_10 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: %v_9->transition_to def_%v_11 %v_9[7.0,6.0,] %v_10[8.0,] 	 SYMBOL:paid,	 ARGS:%v_10,Symbol,
		 2: RETURN %v_11[8.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = preauthorized_to_pending_ext instanceMethod = true
BB 1
	outgoing: 10 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 8 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: RECEIVEARG def_pending_reason 
		 7: 
		 8: %self->pending_ext? def_%v_3 %self[2.0,] pending_reason[2.6,] 	 SYMBOL:	 ARGS:pending_reason,
		 9: BRANCH %v_3[2.8,] 
BB 3
	outgoing: 4 5 
	datadep: 
	instructions:
		 0: (MarketplaceService) def_%v_4 
		 1: (inherit Transaction) def_%v_5 %v_4[3.0,] 
		 2: %v_5[3.1,] 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 5
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_6 %v_5[4.0,3.1,] 
		 1: %v_6[5.0,] 
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: %v_5->const_missing def_%v_6 %v_5[4.0,3.1,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 7
	outgoing: 10 
	datadep: 
	instructions:
		 0: tx->[] def_%v_7 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: HASH-paypal_pending_reason- def_%v_8 pending_reason[2.6,] 
		 2: %v_6->transition_to def_%v_9 %v_6[6.0,5.0,] %v_7[7.0,] %v_8[7.1,] 	 SYMBOL:pending_ext,	 ARGS:%v_7,Symbol,%v_8,
		 3: RETURN %v_9[7.2,] %self[2.0,] 
BB 8
	outgoing: 10 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 10
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = pending_ext? instanceMethod = true
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_pending_reason 
		 6: 
		 7: pending_reason->!= def_%v_3 pending_reason[2.5,] 	 SYMBOL:order,	 ARGS:Symbol,
		 8: BRANCH %v_3[2.7,] 
BB 3
	outgoing: 5 
	datadep: 
	instructions:
		 0: pending_reason->!= def_%v_4 pending_reason[2.5,2.7,] 	 SYMBOL:authorization,	 ARGS:Symbol,
		 1: RETURN %v_4[3.0,] %self[2.0,] 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: RETURN %v_3[2.7,] %self[2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = pending_ext_to_paid instanceMethod = true
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_tx 
		 6: 
		 7: (MarketplaceService) def_%v_3 
		 8: (inherit Transaction) def_%v_4 %v_3[2.7,] 
		 9: %v_4[2.8,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.7,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: (inherit Command) def_%v_5 %v_4[3.0,2.8,] 
		 1: %v_5[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[3.0,2.8,] 	 SYMBOL:Command,	 ARGS:Symbol,
BB 6
	outgoing: 7 8 
	datadep: 
	instructions:
		 0: tx->[] def_%v_6 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: %v_5->transition_to def_%v_7 %v_5[5.0,4.0,] %v_6[6.0,] 	 SYMBOL:paid,	 ARGS:%v_6,Symbol,
		 2: 
		 3: (TransactionService) def_%v_8 
		 4: (inherit Transaction) def_%v_9 %v_8[6.3,] 
		 5: %v_9[6.4,] 
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: %v_8->const_missing def_%v_9 %v_8[6.3,] 	 SYMBOL:Transaction,	 ARGS:Symbol,
BB 8
	outgoing: 9 
	datadep: 
	instructions:
		 0: tx->[] def_%v_10 tx[2.5,] 	 SYMBOL:id,	 ARGS:Symbol,
		 1: %v_9->charge_commission def_%v_11 %v_9[7.0,6.4,] %v_10[8.0,] 	 SYMBOL:	 ARGS:%v_10,
		 2: RETURN %v_11[8.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = delete_transaction instanceMethod = true
BB 1
	outgoing: 10 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: def_cid 
		 6: cid[2.5,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: 
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: def_tx_id 
		 1: tx_id[4.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
BB 6
	outgoing: 7 8 
	datadep: 
	instructions:
		 0: 
		 1: (TransactionStore) def_%v_3 
		 2: HASH-community_id-transaction_id- def_%v_4 cid[2.5,] tx_id[4.0,] 
		 3: %v_3->get_in_community def_%v_5 %v_3[6.1,] %v_4[6.2,] 	 SYMBOL:	 ARGS:%v_4,
		 4: BRANCH %v_5[6.3,] 
BB 7
	outgoing: 10 
	datadep: 
	instructions:
		 0: 
		 1: (TransactionStore) def_%v_6 
		 2: HASH-community_id-transaction_id- def_%v_7 cid[2.5,] tx_id[4.0,] 
		 3: %v_6->delete def_%v_8 %v_6[7.1,] %v_7[7.2,] 	 SYMBOL:	 ARGS:%v_7,
		 4: RETURN %v_8[7.3,] %self[2.0,] 
BB 8
	outgoing: 10 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 10
	outgoing: 
	datadep: 
	instructions:

