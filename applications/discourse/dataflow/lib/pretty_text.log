SET IRMethod, name = t instanceMethod = true
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_key 
		 6: RECEIVEARG def_opts 
		 7: 
		 8: COPY TYPE_StringLiteral "js." def_%v_3 
		 9: %v_3->+ def_%v_4 %v_3[2.8,] key[2.5,] 	 SYMBOL:	 ARGS:key,
		 10: COPY TYPE_PASS def_key %v_4[2.9,] 
		 11: 
		 12: BRANCH opts[2.6,] 
BB 3
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: (I18n) def_%v_5 
		 2: (Hash) def_%v_6 
		 3: opts->entries def_%v_7 opts[2.6,] 	 SYMBOL:	 ARGS:
		 4: %v_6->[] def_%v_8 %v_6[3.2,] %v_7[3.3,] 	 SYMBOL:	 ARGS:%v_7,
		 5: %v_8->symbolize_keys def_%v_9 %v_8[3.4,] 	 SYMBOL:	 ARGS:
		 6: %v_5->t def_%v_10 %v_5[3.1,] key[2.5,2.10,] %v_9[3.5,] 	 SYMBOL:	 ARGS:key,%v_9,
		 7: %v_10->dup def_%v_11 %v_10[3.6,] 	 SYMBOL:	 ARGS:
		 8: COPY TYPE_PASS def_str %v_11[3.7,] 
		 9: 
		 10: opts->each def_%v_12 opts[3.3,2.6,] %self[2.0,] 	 SYMBOL:	 ARGS:opts,
CLOSURE BEGIN: k[] v[] str[3.8,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_k 
		 3: RECEIVEARG def_v 
		 4: COPY TYPE_CurrentScope def_%current_scope 
		 5: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "{{" def_%cl_1_3 
		 2: k->to_s def_%cl_1_4 k[2.2,] 	 SYMBOL:	 ARGS:
		 3: COPY TYPE_StringLiteral "}}" def_%cl_1_5 
		 4: BUILDSTRING def_%cl_1_6 %cl_1_3[3.1,] %cl_1_4[3.2,] %cl_1_5[3.3,] 
		 5: v->to_s def_%cl_1_7 v[2.3,] 	 SYMBOL:	 ARGS:
		 6: str->gsub! def_%cl_1_8 str[] %cl_1_6[3.4,] %cl_1_7[3.5,] 	 SYMBOL:	 ARGS:%cl_1_6,%cl_1_7,
		 7: RETURN %cl_1_8[3.6,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_9 
		 1: def_%cl_1_10 %cl_1_9[4.0,] 
		 2: RETURN %cl_1_10[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: v[2.3,] 
		 11: 
		 12: COPY TYPE_PASS def_%v_13 str[3.8,] 
		 13: RETURN str[3.8,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: (I18n) def_%v_14 
		 2: %v_14->t def_%v_15 %v_14[4.1,] key[2.5,2.10,] 	 SYMBOL:	 ARGS:key,
		 3: RETURN %v_15[4.2,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = avatar_template instanceMethod = true
BB 1
	outgoing: 12 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_username 
		 6: 
		 7: BRANCH username[2.5,] 
BB 3
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_3 
		 1: 
		 2: (User) def_%v_5 
		 3: username->downcase def_%v_6 username[2.5,] 	 SYMBOL:	 ARGS:
		 4: HASH-username_lower- def_%v_7 %v_6[3.3,] 
		 5: %v_5->find_by def_%v_8 %v_5[3.2,] %v_7[3.4,] 	 SYMBOL:	 ARGS:%v_7,
		 6: COPY TYPE_PASS def_user %v_8[3.5,] 
		 7: 
		 8: %v_8->present? def_%v_9 %v_8[3.5,] 	 SYMBOL:	 ARGS:
		 9: BRANCH %v_9[3.8,] 
BB 4
	outgoing: 12 
	datadep: 
	instructions:
		 0: COPY TYPE_StringLiteral "" def_%v_4 
		 1: RETURN %v_4[4.0,] %self[2.0,] 
BB 6
	outgoing: 9 10 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_10 
		 1: 
		 2: user->uploaded_avatar_id def_%v_12 user[3.6,] 	 SYMBOL:	 ARGS:
		 3: %v_12->! def_%v_13 %v_12[6.2,] 	 SYMBOL:	 ARGS:
		 4: BRANCH %v_13[6.3,] 
BB 7
	outgoing: 12 
	datadep: 
	instructions:
		 0: COPY TYPE_StringLiteral "" def_%v_11 
		 1: RETURN %v_11[7.0,] %self[2.0,] 
BB 9
	outgoing: 11 
	datadep: 
	instructions:
		 0: 
		 1: (User) def_%v_14 
		 2: %v_14->default_template def_%v_15 %v_14[9.1,] username[2.5,] 	 SYMBOL:	 ARGS:username,
		 3: COPY TYPE_PASS def_avatar_template %v_15[9.2,] 
		 4: 
BB 10
	outgoing: 11 
	datadep: 
	instructions:
		 0: 
		 1: user->avatar_template def_%v_16 user[3.6,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_avatar_template %v_16[10.1,] 
		 3: COPY TYPE_PASS def_%v_15 %v_16[10.1,] 
BB 11
	outgoing: 12 
	datadep: 
	instructions:
		 0: 
		 1: (UrlHelper) def_%v_17 
		 2: (UrlHelper) def_%v_18 
		 3: %v_18->absolute def_%v_19 %v_18[11.2,] avatar_template[10.2,9.3,] 	 SYMBOL:	 ARGS:avatar_template,
		 4: %v_17->schemaless def_%v_20 %v_17[11.1,] %v_19[11.3,] 	 SYMBOL:	 ARGS:%v_19,
		 5: RETURN %v_20[11.4,] %self[2.0,] 
BB 12
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = mention_lookup instanceMethod = true
BB 1
	outgoing: 12 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_username 
		 6: 
		 7: BRANCH username[2.5,] 
BB 3
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_3 
		 1: 
		 2: (Group) def_%v_4 
		 3: COPY TYPE_StringLiteral "SELECT 1 FROM groups WHERE name = ?" def_%v_5 
		 4: %v_4->exec_sql def_%v_6 %v_4[3.2,] %v_5[3.3,] username[2.5,] 	 SYMBOL:	 ARGS:%v_5,username,
		 5: %v_6->values def_%v_7 %v_6[3.4,] 	 SYMBOL:	 ARGS:
		 6: %v_7->length def_%v_8 %v_7[3.5,] 	 SYMBOL:	 ARGS:
		 7: %v_8->== def_%v_9 %v_8[3.6,] 	 SYMBOL:	 ARGS:Fixnum,
		 8: BRANCH %v_9[3.7,] 
BB 4
	outgoing: 12 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 6
	outgoing: 12 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "group" def_%v_10 
		 2: RETURN %self[2.0,] 
BB 7
	outgoing: 8 9 
	datadep: 
	instructions:
		 0: 
		 1: username->downcase def_%v_11 username[2.5,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_username %v_11[7.1,] 
		 3: 
		 4: (User) def_%v_12 
		 5: COPY TYPE_StringLiteral "SELECT 1 FROM users WHERE username_lower = ?" def_%v_13 
		 6: %v_12->exec_sql def_%v_14 %v_12[7.4,] %v_13[7.5,] %v_11[7.1,] 	 SYMBOL:	 ARGS:%v_13,username,
		 7: %v_14->values def_%v_15 %v_14[7.6,] 	 SYMBOL:	 ARGS:
		 8: %v_15->length def_%v_16 %v_15[7.7,] 	 SYMBOL:	 ARGS:
		 9: %v_16->== def_%v_17 %v_16[7.8,] 	 SYMBOL:	 ARGS:Fixnum,
		 10: BRANCH %v_17[7.9,] 
BB 8
	outgoing: 10 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "user" def_%v_18 
		 2: 
BB 9
	outgoing: 10 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_Nil def_%v_18 
BB 10
	outgoing: 12 
	datadep: 
	instructions:
		 0: RETURN %v_18[9.1,8.1,] %self[2.0,] 
BB 12
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = category_hashtag_lookup instanceMethod = true
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_category_slug 
		 6: 
		 7: (Category) def_%v_3 
		 8: %v_3->query_from_hashtag_slug def_%v_4 %v_3[2.7,] category_slug[2.5,] 	 SYMBOL:	 ARGS:category_slug,
		 9: COPY TYPE_PASS def_category %v_4[2.8,] 
		 10: BRANCH %v_4[2.8,] 
BB 3
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: category->url_with_id def_%v_5 category[2.9,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_Array def_%v_6 %v_5[3.1,] category_slug[2.5,] 
		 3: RETURN %v_5[3.1,] category_slug[2.5,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: RETURN %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = get_topic_info instanceMethod = true
BB 1
	outgoing: 11 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_topic_id 
		 6: 
		 7: (Fixnum) def_%v_3 
		 8: %v_3->=== def_%v_4 %v_3[2.7,] topic_id[2.5,] 	 SYMBOL:	 ARGS:topic_id,
		 9: BRANCH %v_4[2.8,] 
BB 3
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_5 
		 1: 
		 2: (Topic) def_%v_6 
		 3: HASH-id- def_%v_7 topic_id[2.5,] 
		 4: %v_6->find_by def_%v_8 %v_6[3.2,] %v_7[3.3,] 	 SYMBOL:	 ARGS:%v_7,
		 5: COPY TYPE_PASS def_topic %v_8[3.4,] 
		 6: 
		 7: COPY TYPE_PASS def_%v_9 %v_8[3.4,] 
		 8: BRANCH %v_8[3.4,] 
BB 4
	outgoing: 11 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: (Guardian) def_%v_10 
		 1: %v_10->new def_%v_11 %v_10[6.0,] 	 SYMBOL:	 ARGS:
		 2: %v_11->can_see? def_%v_12 %v_11[6.1,] topic[3.5,] 	 SYMBOL:	 ARGS:topic,
		 3: COPY TYPE_PASS def_%v_9 %v_12[6.2,] 
BB 7
	outgoing: 8 9 
	datadep: 
	instructions:
		 0: BRANCH %v_9[6.3,3.7,] 
BB 8
	outgoing: 11 
	datadep: 
	instructions:
		 0: 
		 1: topic->title def_%v_13 topic[3.5,] 	 SYMBOL:	 ARGS:
		 2: topic->url def_%v_14 topic[8.1,3.5,] 	 SYMBOL:	 ARGS:
		 3: HASH-title-href- def_%v_15 %v_13[8.1,] %v_14[8.2,] 
		 4: RETURN %v_13[8.1,] %v_14[8.2,] %self[2.0,] 
BB 9
	outgoing: 11 
	datadep: 
	instructions:
		 0: RETURN %self[2.0,] 
BB 11
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = app_root instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: (Rails) def_%v_3 
		 7: %v_3->root def_%v_4 %v_3[2.6,] 	 SYMBOL:	 ARGS:
		 8: RETURN %v_4[2.7,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = create_new_context instanceMethod = false
BB 1
	outgoing: 11 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 5 9 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: (V8) def_%v_3 
		 7: (inherit Context) def_%v_4 %v_3[2.6,] 
		 8: %v_4[2.7,] 
BB 4
	outgoing: 5 9 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.6,] 	 SYMBOL:Context,	 ARGS:Symbol,
BB 5
	outgoing: 6 7 9 
	datadep: 
	instructions:
		 0: HASH-timeout- def_%v_5 
		 1: %v_4->new def_%v_6 %v_4[4.0,2.7,] %v_5[5.0,] 	 SYMBOL:	 ARGS:%v_5,
		 2: COPY TYPE_PASS def_ctx %v_6[5.1,] 
		 3: 
		 4: COPY TYPE_StringLiteral "helpers" def_%v_7 
		 5: (Helpers) def_%v_8 
		 6: %v_8->new def_%v_9 %v_8[5.5,] 	 SYMBOL:	 ARGS:
		 7: ATTRASSIGN ctx->[] %v_7[5.4,] %v_9[5.6,] 
		 8: 
		 9: COPY TYPE_StringLiteral "vendor/assets/javascripts/md5.js" def_%v_10 
		 10: COPY TYPE_StringLiteral "vendor/assets/javascripts/lodash.js" def_%v_11 
		 11: COPY TYPE_StringLiteral "vendor/assets/javascripts/Markdown.Converter.js" def_%v_12 
		 12: COPY TYPE_StringLiteral "lib/headless-ember.js" def_%v_13 
		 13: COPY TYPE_StringLiteral "vendor/assets/javascripts/rsvp.js" def_%v_14 
		 14: (Rails) def_%v_15 
		 15: %v_15->configuration def_%v_16 %v_15[5.14,] 	 SYMBOL:	 ARGS:
		 16: %v_16->ember def_%v_17 %v_16[5.15,] 	 SYMBOL:	 ARGS:
		 17: %v_17->handlebars_location def_%v_18 %v_17[5.16,] 	 SYMBOL:	 ARGS:
		 18: %self->ctx_load def_%v_19 %self[2.0,] ctx[5.2,5.7,] %v_10[5.9,] %v_11[5.10,] %v_12[5.11,] %v_13[5.12,] %v_14[5.13,] %v_18[5.17,] 	 SYMBOL:	 ARGS:ctx,%v_10,%v_11,%v_12,%v_13,%v_14,%v_18,
		 19: 
		 20: COPY TYPE_StringLiteral "var Discourse = {}; Discourse.SiteSettings = {};" def_%v_20 
		 21: ctx->eval def_%v_21 ctx[5.2,5.7,] %v_20[5.20,] 	 SYMBOL:	 ARGS:%v_20,
		 22: 
		 23: COPY TYPE_StringLiteral "var window = {}; window.devicePixelRatio = 2;" def_%v_22 
		 24: ctx->eval def_%v_23 ctx[5.2,5.7,5.21,] %v_22[5.23,] 	 SYMBOL:	 ARGS:%v_22,
		 25: 
		 26: COPY TYPE_StringLiteral "var I18n = {}; I18n.t = function(a,b){ return helpers.t(a,b); }" def_%v_24 
		 27: ctx->eval def_%v_25 ctx[5.2,5.7,5.21,5.24,] %v_24[5.26,] 	 SYMBOL:	 ARGS:%v_24,
		 28: 
		 29: COPY TYPE_StringLiteral "var modules = {};" def_%v_26 
		 30: ctx->eval def_%v_27 ctx[5.2,5.7,5.21,5.24,5.27,] %v_26[5.29,] 	 SYMBOL:	 ARGS:%v_26,
		 31: 
		 32: %self->decorate_context def_%v_28 %self[5.18,2.0,] ctx[5.2,5.7,5.21,5.24,5.27,5.30,] 	 SYMBOL:	 ARGS:ctx,
		 33: 
		 34: COPY TYPE_StringLiteral "vendor/assets/javascripts/better_markdown.js" def_%v_29 
		 35: COPY TYPE_StringLiteral "app/assets/javascripts/defer/html-sanitizer-bundle.js" def_%v_30 
		 36: COPY TYPE_StringLiteral "app/assets/javascripts/discourse/lib/utilities.js" def_%v_31 
		 37: COPY TYPE_StringLiteral "app/assets/javascripts/discourse/dialects/dialect.js" def_%v_32 
		 38: COPY TYPE_StringLiteral "app/assets/javascripts/discourse/lib/censored-words.js" def_%v_33 
		 39: COPY TYPE_StringLiteral "app/assets/javascripts/discourse/lib/markdown.js" def_%v_34 
		 40: %self->ctx_load def_%v_35 %self[5.18,5.32,2.0,] ctx[5.2,5.7,5.21,5.24,5.27,5.30,] %v_29[5.34,] %v_30[5.35,] %v_31[5.36,] %v_32[5.37,] %v_33[5.38,] %v_34[5.39,] 	 SYMBOL:	 ARGS:ctx,%v_29,%v_30,%v_31,%v_32,%v_33,%v_34,
		 41: 
		 42: (Dir) def_%v_36 
		 43: %self->app_root def_%v_37 %self[5.18,5.32,5.40,2.0,] 	 SYMBOL:	 ARGS:
		 44: COPY TYPE_StringLiteral "/app/assets/javascripts/discourse/dialects/**.js" def_%v_38 
		 45: BUILDSTRING def_%v_39 %v_37[5.43,] %v_38[5.44,] 
		 46: %v_36->[] def_%v_40 %v_36[5.42,] %v_39[5.45,] 	 SYMBOL:	 ARGS:%v_39,
		 47: %v_40->sort def_%v_41 %v_40[5.46,] 	 SYMBOL:	 ARGS:
		 48: %v_41->each def_%v_42 %v_41[5.47,] %self[5.18,5.32,5.40,5.43,2.0,] 	 SYMBOL:	 ARGS:%v_41,
CLOSURE BEGIN: dialect[] ctx[5.2,5.7,5.21,5.24,5.27,5.30,] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_dialect 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_Regexp def_%cl_1_3 
		 2: dialect->=~ def_%cl_1_4 dialect[2.2,] 	 SYMBOL:	 ARGS:%cl_1_3,
		 3: BRANCH %cl_1_4[3.2,] 
BB 4
	outgoing: 9 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_5 
		 1: RETURN %cl_1_5[4.0,] %self[2.0,] 
BB 5
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: ctx->load def_%cl_1_6 ctx[] dialect[2.2,] 	 SYMBOL:	 ARGS:dialect,
		 1: RETURN %cl_1_6[5.0,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_1_7 
		 1: def_%cl_1_8 %cl_1_7[7.0,] 
		 2: RETURN %cl_1_8[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 49: 
		 50: (ERB) def_%v_43 
		 51: (File) def_%v_44 
		 52: %self->app_root def_%v_45 %self[5.18,5.32,5.40,5.43,2.0,] 	 SYMBOL:	 ARGS:
		 53: COPY TYPE_StringLiteral "/app/assets/javascripts/discourse/lib/emoji/emoji.js.erb" def_%v_46 
		 54: BUILDSTRING def_%v_47 %v_45[5.52,] %v_46[5.53,] 
		 55: %v_44->read def_%v_48 %v_44[5.51,] %v_47[5.54,] 	 SYMBOL:	 ARGS:%v_47,
		 56: %v_43->new def_%v_49 %v_43[5.50,] %v_48[5.55,] 	 SYMBOL:	 ARGS:%v_48,
		 57: COPY TYPE_PASS def_emoji %v_49[5.56,] 
		 58: 
		 59: %v_49->result def_%v_50 %v_49[5.56,] 	 SYMBOL:	 ARGS:
		 60: ctx->eval def_%v_51 ctx[5.2,5.7,5.21,5.24,5.27,5.30,] %v_50[5.59,] 	 SYMBOL:	 ARGS:%v_50,
		 61: 
		 62: (DiscoursePluginRegistry) def_%v_52 
		 63: %v_52->server_side_javascripts def_%v_53 %v_52[5.62,] 	 SYMBOL:	 ARGS:
		 64: %v_53->present? def_%v_54 %v_53[5.63,] 	 SYMBOL:	 ARGS:
		 65: BRANCH %v_54[5.64,] 
BB 6
	outgoing: 8 9 
	datadep: 
	instructions:
		 0: 
		 1: (DiscoursePluginRegistry) def_%v_55 
		 2: %v_55->server_side_javascripts def_%v_56 %v_55[6.1,] 	 SYMBOL:	 ARGS:
		 3: %v_56->each def_%v_57 %v_56[6.2,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_56,
CLOSURE BEGIN: ssjs[] erb[] ctx[5.2,5.7,] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_2_0 
		 2: RECEIVEARG def_ssjs 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_Regexp def_%cl_2_3 
		 2: ssjs->=~ def_%cl_2_4 ssjs[2.2,] 	 SYMBOL:	 ARGS:%cl_2_3,
		 3: BRANCH %cl_2_4[3.2,] 
BB 4
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: 
		 1: (ERB) def_%cl_2_5 
		 2: (File) def_%cl_2_6 
		 3: %cl_2_6->read def_%cl_2_7 %cl_2_6[4.2,] ssjs[2.2,] 	 SYMBOL:	 ARGS:ssjs,
		 4: %cl_2_5->new def_%cl_2_8 %cl_2_5[4.1,] %cl_2_7[4.3,] 	 SYMBOL:	 ARGS:%cl_2_7,
		 5: COPY TYPE_PASS def_erb %cl_2_8[4.4,] 
		 6: 
		 7: ATTRASSIGN %cl_2_8->filename ssjs[2.2,] 
		 8: 
		 9: erb->result def_%cl_2_9 erb[4.5,] 	 SYMBOL:	 ARGS:
		 10: ctx->eval def_%cl_2_10 ctx[] %cl_2_9[4.9,] 	 SYMBOL:	 ARGS:%cl_2_9,
		 11: 
BB 5
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: ctx->load def_%cl_2_11 ctx[] ssjs[2.2,] 	 SYMBOL:	 ARGS:ssjs,
		 2: RETURN %cl_2_11[5.1,] %self[2.0,] 
BB 6
	outgoing: 9 
	datadep: 
	instructions:
		 0: RETURN %cl_2_10[4.10,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_2_12 
		 1: def_%cl_2_13 %cl_2_12[7.0,] 
		 2: RETURN %cl_2_13[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: erb[4.5,] 
		 4: 
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_57 
BB 8
	outgoing: 11 
	datadep: 
	instructions:
		 0: 
		 1: RETURN ctx[5.2,5.7,] %self[2.0,] 
BB 9
	outgoing: 11 
	datadep: 
	instructions:
		 0: def_%v_58 
		 1: def_%v_59 %v_58[9.0,] 
		 2: RETURN %v_59[9.1,] %self[2.0,] 
BB 11
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = v8 instanceMethod = false
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: GETFIELD %self->ctx def_%v_3 %self[2.0,] 
		 7: BRANCH %v_3[2.6,] 
BB 4
	outgoing: 9 
	datadep: 
	instructions:
		 0: GETFIELD %self->ctx def_%v_4 %self[2.0,] 
		 1: RETURN %v_4[4.0,] %self[2.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_5 
BB 6
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: GETFIELD %self->ctx_init def_%v_6 %self[2.0,] 
		 2: %v_6->synchronize def_%v_7 %v_6[6.1,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_6,
CLOSURE BEGIN: %self[2.0,] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 5 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: GETFIELD %self->ctx def_%cl_1_3 %self[2.0,] 
		 6: BRANCH %cl_1_3[2.5,] 
BB 4
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: GETFIELD %self->ctx def_%cl_1_4 %self[2.0,] 
		 1: 
		 2: RETURN %cl_1_4[4.0,] %self[2.0,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_5 
BB 6
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: %self->create_new_context def_%cl_1_6 %self[2.0,] 	 SYMBOL:	 ARGS:
		 1: ATTRASSIGN %self->ctx %cl_1_6[6.0,] 
		 2: RETURN %cl_1_6[6.0,] %self[6.0,6.1,2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_1_7 
		 1: def_%cl_1_8 %cl_1_7[7.0,] 
		 2: RETURN %cl_1_8[7.1,] %self[6.1,2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 3: 
		 4: GETFIELD %self->ctx def_%v_8 %self[2.0,] 
		 5: RETURN %v_8[6.4,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%v_9 
		 1: def_%v_10 %v_9[7.0,] 
		 2: RETURN %v_10[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = reset_context instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: GETFIELD %self->ctx_init def_%v_3 %self[2.0,] 
		 7: %v_3->synchronize def_%v_4 %v_3[2.6,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_3,
CLOSURE BEGIN: %self[2.0,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: ATTRASSIGN %self->ctx 
		 2: RETURN %self[3.1,2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_3 
		 1: def_%cl_1_4 %cl_1_3[4.0,] 
		 2: RETURN %cl_1_4[4.1,] %self[3.1,2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 8: RETURN %v_4[2.7,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = decorate_context instanceMethod = false
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_context 
		 6: 
		 7: COPY TYPE_StringLiteral "Discourse.CDN = '" def_%v_3 
		 8: (Rails) def_%v_4 
		 9: %v_4->configuration def_%v_5 %v_4[2.8,] 	 SYMBOL:	 ARGS:
		 10: %v_5->action_controller def_%v_6 %v_5[2.9,] 	 SYMBOL:	 ARGS:
		 11: %v_6->asset_host def_%v_7 %v_6[2.10,] 	 SYMBOL:	 ARGS:
		 12: COPY TYPE_StringLiteral "';" def_%v_8 
		 13: BUILDSTRING def_%v_9 %v_3[2.7,] %v_7[2.11,] %v_8[2.12,] 
		 14: context->eval def_%v_10 context[2.5,] %v_9[2.13,] 	 SYMBOL:	 ARGS:%v_9,
		 15: 
		 16: COPY TYPE_StringLiteral "Discourse.BaseUrl = '" def_%v_11 
		 17: (RailsMultisite) def_%v_12 
		 18: (inherit ConnectionManagement) def_%v_13 %v_12[2.17,] 
		 19: %v_13[2.18,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_12->const_missing def_%v_13 %v_12[2.17,] 	 SYMBOL:ConnectionManagement,	 ARGS:Symbol,
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: %v_13->current_hostname def_%v_14 %v_13[3.0,2.18,] 	 SYMBOL:	 ARGS:
		 1: COPY TYPE_StringLiteral "'.replace(/:[d]*$/,'');" def_%v_15 
		 2: BUILDSTRING def_%v_16 %v_11[2.16,] %v_14[4.0,] %v_15[4.1,] 
		 3: context->eval def_%v_17 context[2.5,] %v_16[4.2,] 	 SYMBOL:	 ARGS:%v_16,
		 4: 
		 5: COPY TYPE_StringLiteral "Discourse.BaseUri = '" def_%v_18 
		 6: (Discourse) def_%v_19 
		 7: %v_19->base_uri def_%v_20 %v_19[4.6,] 	 SYMBOL:	 ARGS:
		 8: COPY TYPE_StringLiteral "';" def_%v_21 
		 9: BUILDSTRING def_%v_22 %v_18[4.5,] %v_20[4.7,] %v_21[4.8,] 
		 10: context->eval def_%v_23 context[4.3,2.5,] %v_22[4.9,] 	 SYMBOL:	 ARGS:%v_22,
		 11: 
		 12: COPY TYPE_StringLiteral "Discourse.SiteSettings = " def_%v_24 
		 13: (SiteSetting) def_%v_25 
		 14: %v_25->client_settings_json def_%v_26 %v_25[4.13,] 	 SYMBOL:	 ARGS:
		 15: COPY TYPE_StringLiteral ";" def_%v_27 
		 16: BUILDSTRING def_%v_28 %v_24[4.12,] %v_26[4.14,] %v_27[4.15,] 
		 17: context->eval def_%v_29 context[4.3,4.10,2.5,] %v_28[4.16,] 	 SYMBOL:	 ARGS:%v_28,
		 18: 
		 19: COPY TYPE_StringLiteral "Discourse.getURL = function(url) {
      if (!url) return url;
      if (!/^\/[^\/]/.test(url)) return url;

      var u = (Discourse.BaseUri === undefined ? '/' : Discourse.BaseUri);

      if (u[u.length-1] === '/') u = u.substring(0, u.length-1);
      if (url.indexOf(u) !== -1) return url;
      if (u.length > 0  && url[0] !== '/') url = '/' + url;

      return u + url;
    };" def_%v_30 
		 20: context->eval def_%v_31 context[4.3,4.10,4.17,2.5,] %v_30[4.19,] 	 SYMBOL:	 ARGS:%v_30,
		 21: 
		 22: COPY TYPE_StringLiteral "Discourse.getURLWithCDN = function(url) {
      url = this.getURL(url);
      if (Discourse.CDN && /^\/[^\/]/.test(url)) {
        url = Discourse.CDN + url;
      } else if (Discourse.S3CDN) {
        url = url.replace(Discourse.S3BaseUrl, Discourse.S3CDN);
      }
      return url;
    };" def_%v_32 
		 23: context->eval def_%v_33 context[4.3,4.10,4.17,4.20,2.5,] %v_32[4.22,] 	 SYMBOL:	 ARGS:%v_32,
		 24: RETURN %v_33[4.23,] %self[2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = markdown instanceMethod = false
BB 1
	outgoing: 20 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 5 18 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_text 
		 6: RECEIVECONSTARG def_opts 
		 7: opts[2.6,] 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_opts 
BB 5
	outgoing: 6 9 18 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_Nil def_baked 
		 2: 
		 3: %self->protect def_%v_3 %self[2.0,] %self[2.0,] 	 SYMBOL:	 ARGS:%self,
CLOSURE BEGIN: %self[2.0,] opts[4.0,2.6,] context_opts[] context[] text[2.5,] klass[] emoji[] 
BB 1
	outgoing: 17 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 15 
	datadep: 
	instructions:
		 0: 
		 1: %self->v8 def_%cl_1_3 %self[2.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_context %cl_1_3[3.1,] 
		 3: 
		 4: %self->decorate_context def_%cl_1_4 %self[3.1,2.0,] %cl_1_3[3.1,] 	 SYMBOL:	 ARGS:context,
		 5: 
		 6: COPY TYPE_PASS def_%cl_1_5 opts[] 
		 7: BRANCH opts[] 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: HASH- def_%cl_1_6 
		 1: COPY TYPE_PASS def_%cl_1_5 %cl_1_6[4.0,] 
BB 5
	outgoing: 6 7 15 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_context_opts %cl_1_5[4.1,3.6,] 
		 1: 
		 2: %cl_1_5->[] def_%cl_1_7 %cl_1_5[4.1,3.6,] 	 SYMBOL:sanitize,	 ARGS:Symbol,
		 3: %cl_1_7->== def_%cl_1_8 %cl_1_7[5.2,] 	 SYMBOL:	 ARGS:Boolean,
		 4: BRANCH %cl_1_8[5.3,] 
BB 6
	outgoing: 8 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_9 
		 1: 
BB 7
	outgoing: 8 15 
	datadep: 
	instructions:
		 0: ATTRASSIGN context_opts->[] 
		 1: COPY TYPE_Boolean def_%cl_1_9 
BB 8
	outgoing: 9 10 15 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "opts" def_%cl_1_10 
		 2: ATTRASSIGN context->[] %cl_1_10[8.1,] context_opts[7.0,5.0,] 
		 3: 
		 4: COPY TYPE_StringLiteral "raw" def_%cl_1_11 
		 5: ATTRASSIGN context->[] %cl_1_11[8.4,] text[] 
		 6: 
		 7: (Post) def_%cl_1_12 
		 8: %cl_1_12->white_listed_image_classes def_%cl_1_13 %cl_1_12[8.7,] 	 SYMBOL:	 ARGS:
		 9: %cl_1_13->present? def_%cl_1_14 %cl_1_13[8.8,] 	 SYMBOL:	 ARGS:
		 10: BRANCH %cl_1_14[8.9,] 
BB 9
	outgoing: 11 15 
	datadep: 
	instructions:
		 0: 
		 1: (Post) def_%cl_1_15 
		 2: %cl_1_15->white_listed_image_classes def_%cl_1_16 %cl_1_15[9.1,] 	 SYMBOL:	 ARGS:
		 3: %cl_1_16->each def_%cl_1_17 %cl_1_16[9.2,] %self[2.0,] 	 SYMBOL:	 ARGS:%cl_1_16,
CLOSURE BEGIN: klass[] context[8.2,8.5,3.2,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_2_0 
		 2: RECEIVEARG def_klass 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "Discourse.Markdown.whiteListClass('" def_%cl_2_3 
		 2: COPY TYPE_StringLiteral "')" def_%cl_2_4 
		 3: BUILDSTRING def_%cl_2_5 %cl_2_3[3.1,] klass[2.2,] %cl_2_4[3.2,] 
		 4: context->eval def_%cl_2_6 context[] %cl_2_5[3.3,] 	 SYMBOL:	 ARGS:%cl_2_5,
		 5: RETURN %cl_2_6[3.4,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_2_7 
		 1: def_%cl_2_8 %cl_2_7[4.0,] 
		 2: RETURN %cl_2_8[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 4: 
BB 10
	outgoing: 11 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_17 
BB 11
	outgoing: 12 13 15 
	datadep: 
	instructions:
		 0: 
		 1: (SiteSetting) def_%cl_1_18 
		 2: %cl_1_18->enable_emoji? def_%cl_1_19 %cl_1_18[11.1,] 	 SYMBOL:	 ARGS:
		 3: BRANCH %cl_1_19[11.2,] 
BB 12
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "Discourse.Dialect.setUnicodeReplacements(" def_%cl_1_20 
		 2: (Emoji) def_%cl_1_21 
		 3: %cl_1_21->unicode_replacements_json def_%cl_1_22 %cl_1_21[12.2,] 	 SYMBOL:	 ARGS:
		 4: COPY TYPE_StringLiteral ")" def_%cl_1_23 
		 5: BUILDSTRING def_%cl_1_24 %cl_1_20[12.1,] %cl_1_22[12.3,] %cl_1_23[12.4,] 
		 6: context->eval def_%cl_1_25 context[8.2,8.5,3.2,] %cl_1_24[12.5,] 	 SYMBOL:	 ARGS:%cl_1_24,
		 7: 
BB 13
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "Discourse.Dialect.setUnicodeReplacements(null)" def_%cl_1_26 
		 2: context->eval def_%cl_1_27 context[8.2,8.5,3.2,] %cl_1_26[13.1,] 	 SYMBOL:	 ARGS:%cl_1_26,
		 3: COPY TYPE_PASS def_%cl_1_25 %cl_1_27[13.2,] 
BB 14
	outgoing: 15 17 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "Discourse.Dialect.resetEmojis();" def_%cl_1_28 
		 2: context->eval def_%cl_1_29 context[8.2,8.5,3.2,] %cl_1_28[14.1,] 	 SYMBOL:	 ARGS:%cl_1_28,
		 3: 
		 4: (Emoji) def_%cl_1_30 
		 5: %cl_1_30->custom def_%cl_1_31 %cl_1_30[14.4,] 	 SYMBOL:	 ARGS:
		 6: %cl_1_31->each def_%cl_1_32 %cl_1_31[14.5,] %self[2.0,] 	 SYMBOL:	 ARGS:%cl_1_31,
CLOSURE BEGIN: emoji[] context[14.2,8.2,8.5,3.2,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_3_0 
		 2: RECEIVEARG def_emoji 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "Discourse.Dialect.registerEmoji('" def_%cl_3_3 
		 2: emoji->name def_%cl_3_4 emoji[2.2,] 	 SYMBOL:	 ARGS:
		 3: COPY TYPE_StringLiteral "', '" def_%cl_3_5 
		 4: emoji->url def_%cl_3_6 emoji[3.2,2.2,] 	 SYMBOL:	 ARGS:
		 5: COPY TYPE_StringLiteral "');" def_%cl_3_7 
		 6: BUILDSTRING def_%cl_3_8 %cl_3_3[3.1,] %cl_3_4[3.2,] %cl_3_5[3.3,] %cl_3_6[3.4,] %cl_3_7[3.5,] 
		 7: context->eval def_%cl_3_9 context[] %cl_3_8[3.6,] 	 SYMBOL:	 ARGS:%cl_3_8,
		 8: RETURN %cl_3_9[3.7,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_3_10 
		 1: def_%cl_3_11 %cl_3_10[4.0,] 
		 2: RETURN %cl_3_11[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 7: 
		 8: COPY TYPE_StringLiteral "Discourse.Emoji.applyCustomEmojis();" def_%cl_1_33 
		 9: context->eval def_%cl_1_34 context[14.2,8.2,8.5,3.2,] %cl_1_33[14.8,] 	 SYMBOL:	 ARGS:%cl_1_33,
		 10: 
		 11: COPY TYPE_StringLiteral "opts["mentionLookup"] = function(u){return helpers.mention_lookup(u);}" def_%cl_1_35 
		 12: context->eval def_%cl_1_36 context[14.2,14.9,8.2,8.5,3.2,] %cl_1_35[14.11,] 	 SYMBOL:	 ARGS:%cl_1_35,
		 13: 
		 14: COPY TYPE_StringLiteral "opts["categoryHashtagLookup"] = function(c){return helpers.category_hashtag_lookup(c);}" def_%cl_1_37 
		 15: context->eval def_%cl_1_38 context[14.2,14.9,14.12,8.2,8.5,3.2,] %cl_1_37[14.14,] 	 SYMBOL:	 ARGS:%cl_1_37,
		 16: 
		 17: COPY TYPE_StringLiteral "opts["lookupAvatar"] = function(p){return Discourse.Utilities.avatarImg({size: "tiny", avatarTemplate: helpers.avatar_template(p)});}" def_%cl_1_39 
		 18: context->eval def_%cl_1_40 context[14.2,14.9,14.12,14.15,8.2,8.5,3.2,] %cl_1_39[14.17,] 	 SYMBOL:	 ARGS:%cl_1_39,
		 19: 
		 20: COPY TYPE_StringLiteral "opts["getTopicInfo"] = function(i){return helpers.get_topic_info(i)};" def_%cl_1_41 
		 21: context->eval def_%cl_1_42 context[14.2,14.9,14.12,14.15,14.18,8.2,8.5,3.2,] %cl_1_41[14.20,] 	 SYMBOL:	 ARGS:%cl_1_41,
		 22: 
		 23: (DiscourseEvent) def_%cl_1_43 
		 24: %cl_1_43->trigger def_%cl_1_44 %cl_1_43[14.23,] context[14.2,14.9,14.12,14.15,14.18,14.21,8.2,8.5,3.2,] 	 SYMBOL:markdown_context,	 ARGS:Symbol,context,
		 25: 
		 26: COPY TYPE_StringLiteral "Discourse.Markdown.markdownConverter(opts).makeHtml(raw)" def_%cl_1_45 
		 27: context->eval def_%cl_1_46 context[14.2,14.9,14.12,14.15,14.18,14.21,8.2,8.5,3.2,] %cl_1_45[14.26,] 	 SYMBOL:	 ARGS:%cl_1_45,
		 28: COPY TYPE_PASS def_baked %cl_1_46[14.27,] 
		 29: RETURN %cl_1_46[14.27,] %self[2.0,] 
BB 15
	outgoing: 17 
	datadep: 
	instructions:
		 0: def_%cl_1_47 
		 1: def_%cl_1_48 %cl_1_47[15.0,] 
		 2: RETURN %cl_1_48[15.1,] %self[2.0,] 
BB 17
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: context_opts[5.0,7.0,] baked[14.28,] 
		 4: 
		 5: baked->blank? def_%v_4 baked[5.1,5.3,] 	 SYMBOL:	 ARGS:
		 6: BRANCH %v_4[5.5,] 
BB 6
	outgoing: 7 8 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%v_5 opts[4.0,2.6,] 
		 1: BRANCH opts[4.0,2.6,] 
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: HASH- def_%v_6 
		 1: COPY TYPE_PASS def_%v_5 %v_6[7.0,] 
BB 8
	outgoing: 9 18 
	datadep: 
	instructions:
		 0: %v_5->[] def_%v_7 %v_5[7.1,6.0,] 	 SYMBOL:skip_blank_test,	 ARGS:Symbol,
		 1: %v_7->! def_%v_8 %v_7[8.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%v_4 %v_8[8.1,] 
BB 9
	outgoing: 10 16 
	datadep: 
	instructions:
		 0: BRANCH %v_4[8.2,5.5,] 
BB 10
	outgoing: 11 14 18 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "a" def_%v_9 
		 2: HASH-skip_blank_test- def_%v_10 
		 3: %self->markdown def_%v_11 %self[2.0,] %v_9[10.1,] %v_10[10.2,] 	 SYMBOL:	 ARGS:%v_9,%v_10,
		 4: COPY TYPE_PASS def_test %v_11[10.3,] 
		 5: 
		 6: %v_11->blank? def_%v_12 %v_11[10.3,] 	 SYMBOL:	 ARGS:
		 7: BRANCH %v_12[10.6,] 
BB 11
	outgoing: 12 13 18 
	datadep: 
	instructions:
		 0: 
		 1: (Rails) def_%v_13 
		 2: %v_13->logger def_%v_14 %v_13[11.1,] 	 SYMBOL:	 ARGS:
		 3: COPY TYPE_StringLiteral "Markdown engine appears to have crashed, resetting context" def_%v_15 
		 4: %v_14->warn def_%v_16 %v_14[11.2,] %v_15[11.3,] 	 SYMBOL:	 ARGS:%v_15,
		 5: 
		 6: %self->reset_context def_%v_17 %self[2.0,] 	 SYMBOL:	 ARGS:
		 7: 
		 8: COPY TYPE_PASS def_%v_18 opts[4.0,2.6,] 
		 9: COPY TYPE_PASS def_%v_19 opts[4.0,2.6,] 
		 10: BRANCH opts[4.0,2.6,] 
BB 12
	outgoing: 13 
	datadep: 
	instructions:
		 0: HASH- def_%v_20 
		 1: COPY TYPE_PASS def_opts %v_20[12.0,] 
		 2: COPY TYPE_PASS def_%v_19 %v_20[12.0,] 
BB 13
	outgoing: 15 18 
	datadep: 
	instructions:
		 0: 
		 1: opts->dup def_%v_21 opts[12.1,4.0,2.6,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_opts %v_21[13.1,] 
		 3: 
		 4: ATTRASSIGN %v_21->[] 
		 5: 
		 6: %self->markdown def_%v_22 %self[2.0,] text[2.5,] opts[13.1,13.2,] 	 SYMBOL:	 ARGS:text,opts,
		 7: COPY TYPE_PASS def_baked %v_22[13.6,] 
		 8: 
BB 14
	outgoing: 15 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_22 
BB 15
	outgoing: 17 
	datadep: 
	instructions:
		 0: 
BB 16
	outgoing: 17 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_22 
BB 17
	outgoing: 20 
	datadep: 
	instructions:
		 0: 
		 1: RETURN baked[13.7,5.1,5.3,] %self[2.0,] 
BB 18
	outgoing: 20 
	datadep: 
	instructions:
		 0: def_%v_23 
		 1: def_%v_24 %v_23[18.0,] 
		 2: RETURN %v_24[18.1,] %self[2.0,] 
BB 20
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = avatar_img instanceMethod = false
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_avatar_template 
		 6: RECEIVEARG def_size 
		 7: 
		 8: %self->protect def_%v_3 %self[2.0,] %self[2.0,] 	 SYMBOL:	 ARGS:%self,
CLOSURE BEGIN: %self[2.0,] avatar_template[2.5,] size[2.6,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: %self->v8 def_%cl_1_3 %self[2.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_StringLiteral "avatarTemplate" def_%cl_1_4 
		 3: ATTRASSIGN %cl_1_3->[] %cl_1_4[3.2,] avatar_template[] 
		 4: 
		 5: %self->v8 def_%cl_1_5 %self[3.1,2.0,] 	 SYMBOL:	 ARGS:
		 6: COPY TYPE_StringLiteral "size" def_%cl_1_6 
		 7: ATTRASSIGN %cl_1_5->[] %cl_1_6[3.6,] size[] 
		 8: 
		 9: %self->v8 def_%cl_1_7 %self[3.1,3.5,2.0,] 	 SYMBOL:	 ARGS:
		 10: %self->decorate_context def_%cl_1_8 %self[3.1,3.5,3.9,2.0,] %cl_1_7[3.9,] 	 SYMBOL:	 ARGS:%cl_1_7,
		 11: 
		 12: %self->v8 def_%cl_1_9 %self[3.1,3.5,3.9,3.10,2.0,] 	 SYMBOL:	 ARGS:
		 13: COPY TYPE_StringLiteral "Discourse.Utilities.avatarImg({ avatarTemplate: avatarTemplate, size: size });" def_%cl_1_10 
		 14: %cl_1_9->eval def_%cl_1_11 %cl_1_9[3.12,] %cl_1_10[3.13,] 	 SYMBOL:	 ARGS:%cl_1_10,
		 15: RETURN %cl_1_11[3.14,] %self[3.1,3.5,3.9,3.10,3.12,2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_12 
		 1: def_%cl_1_13 %cl_1_12[4.0,] 
		 2: RETURN %cl_1_13[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 9: RETURN %v_3[2.8,] %self[2.0,2.8,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%v_4 
		 1: def_%v_5 %v_4[4.0,] 
		 2: RETURN %v_5[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = unescape_emoji instanceMethod = false
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_title 
		 6: 
		 7: %self->protect def_%v_3 %self[2.0,] %self[2.0,] 	 SYMBOL:	 ARGS:%self,
CLOSURE BEGIN: %self[2.0,] title[2.5,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: %self->v8 def_%cl_1_3 %self[2.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_StringLiteral "title" def_%cl_1_4 
		 3: ATTRASSIGN %cl_1_3->[] %cl_1_4[3.2,] title[] 
		 4: 
		 5: %self->v8 def_%cl_1_5 %self[3.1,2.0,] 	 SYMBOL:	 ARGS:
		 6: %self->decorate_context def_%cl_1_6 %self[3.1,3.5,2.0,] %cl_1_5[3.5,] 	 SYMBOL:	 ARGS:%cl_1_5,
		 7: 
		 8: %self->v8 def_%cl_1_7 %self[3.1,3.5,3.6,2.0,] 	 SYMBOL:	 ARGS:
		 9: COPY TYPE_StringLiteral "Discourse.Emoji.unescape(title)" def_%cl_1_8 
		 10: %cl_1_7->eval def_%cl_1_9 %cl_1_7[3.8,] %cl_1_8[3.9,] 	 SYMBOL:	 ARGS:%cl_1_8,
		 11: RETURN %cl_1_9[3.10,] %self[3.1,3.5,3.6,3.8,2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_10 
		 1: def_%cl_1_11 %cl_1_10[4.0,] 
		 2: RETURN %cl_1_11[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 8: RETURN %v_3[2.7,] %self[2.0,2.7,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%v_4 
		 1: def_%v_5 %v_4[4.0,] 
		 2: RETURN %v_5[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = cook instanceMethod = false
BB 1
	outgoing: 17 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_text 
		 6: RECEIVECONSTARG def_opts 
		 7: opts[2.6,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: HASH- def_%v_3 
		 1: COPY TYPE_PASS def_opts %v_3[3.0,] 
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: 
		 1: opts->dup def_%v_4 opts[3.1,2.6,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_options %v_4[4.1,] 
		 3: 
		 4: opts->[] def_%v_5 opts[4.1,3.1,2.6,] 	 SYMBOL:topic_id,	 ARGS:Symbol,
		 5: ATTRASSIGN options->[] %v_5[4.4,] 
		 6: 
		 7: text->dup def_%v_6 text[2.5,] 	 SYMBOL:	 ARGS:
		 8: COPY TYPE_PASS def_working_text %v_6[4.7,] 
		 9: 
		 10: %self->markdown def_%v_7 %self[2.0,] %v_6[4.7,] options[4.2,4.5,] 	 SYMBOL:	 ARGS:working_text,options,
		 11: COPY TYPE_PASS def_sanitized %v_7[4.10,] 
		 12: 
		 13: (Nokogiri) def_%v_8 
		 14: (inherit HTML) def_%v_9 %v_8[4.13,] 
		 15: %v_9[4.14,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_8->const_missing def_%v_9 %v_8[4.13,] 	 SYMBOL:HTML,	 ARGS:Symbol,
BB 6
	outgoing: 7 8 
	datadep: 
	instructions:
		 0: %v_9->fragment def_%v_10 %v_9[5.0,4.14,] sanitized[4.11,] 	 SYMBOL:	 ARGS:sanitized,
		 1: COPY TYPE_PASS def_doc %v_10[6.0,] 
		 2: 
		 3: options->[] def_%v_11 options[4.2,4.5,] 	 SYMBOL:omit_nofollow,	 ARGS:Symbol,
		 4: %v_11->! def_%v_12 %v_11[6.3,] 	 SYMBOL:	 ARGS:
		 5: BRANCH %v_12[6.4,] 
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: (SiteSetting) def_%v_13 
		 1: %v_13->add_rel_nofollow_to_user_content def_%v_14 %v_13[7.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%v_12 %v_14[7.1,] 
BB 8
	outgoing: 9 10 
	datadep: 
	instructions:
		 0: BRANCH %v_12[7.2,6.4,] 
BB 9
	outgoing: 11 
	datadep: 
	instructions:
		 0: 
		 1: %self->add_rel_nofollow_to_user_content def_%v_15 %self[2.0,] doc[6.1,] 	 SYMBOL:	 ARGS:doc,
		 2: 
BB 10
	outgoing: 11 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_15 
BB 11
	outgoing: 12 13 
	datadep: 
	instructions:
		 0: 
		 1: (SiteSetting) def_%v_16 
		 2: %v_16->s3_cdn_url def_%v_17 %v_16[11.1,] 	 SYMBOL:	 ARGS:
		 3: %v_17->present? def_%v_18 %v_17[11.2,] 	 SYMBOL:	 ARGS:
		 4: BRANCH %v_18[11.3,] 
BB 12
	outgoing: 13 
	datadep: 
	instructions:
		 0: (SiteSetting) def_%v_19 
		 1: %v_19->enable_s3_uploads def_%v_20 %v_19[12.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%v_18 %v_20[12.1,] 
BB 13
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: BRANCH %v_18[12.2,11.3,] 
BB 14
	outgoing: 16 
	datadep: 
	instructions:
		 0: 
		 1: %self->add_s3_cdn def_%v_21 %self[2.0,] doc[6.1,] 	 SYMBOL:	 ARGS:doc,
		 2: 
BB 15
	outgoing: 16 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_21 
BB 16
	outgoing: 17 
	datadep: 
	instructions:
		 0: 
		 1: doc->to_html def_%v_22 doc[6.1,] 	 SYMBOL:	 ARGS:
		 2: RETURN %v_22[16.1,] %self[2.0,] 
BB 17
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = add_s3_cdn instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_doc 
		 6: 
		 7: COPY TYPE_StringLiteral "img" def_%v_3 
		 8: doc->css def_%v_4 doc[2.5,] %v_3[2.7,] 	 SYMBOL:	 ARGS:%v_3,
		 9: %v_4->each def_%v_5 %v_4[2.8,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_4,
CLOSURE BEGIN: img[] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_img 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "src" def_%cl_1_3 
		 2: img->[] def_%cl_1_4 img[2.2,] %cl_1_3[3.1,] 	 SYMBOL:	 ARGS:%cl_1_3,
		 3: BRANCH %cl_1_4[3.2,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_5 
		 1: 
BB 5
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: RETURN %self[2.0,] 
BB 6
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "src" def_%cl_1_6 
		 2: COPY TYPE_StringLiteral "src" def_%cl_1_7 
		 3: img->[] def_%cl_1_8 img[2.2,] %cl_1_7[6.2,] 	 SYMBOL:	 ARGS:%cl_1_7,
		 4: (Discourse) def_%cl_1_9 
		 5: %cl_1_9->store def_%cl_1_10 %cl_1_9[6.4,] 	 SYMBOL:	 ARGS:
		 6: %cl_1_10->absolute_base_url def_%cl_1_11 %cl_1_10[6.5,] 	 SYMBOL:	 ARGS:
		 7: (SiteSetting) def_%cl_1_12 
		 8: %cl_1_12->s3_cdn_url def_%cl_1_13 %cl_1_12[6.7,] 	 SYMBOL:	 ARGS:
		 9: %cl_1_8->sub def_%cl_1_14 %cl_1_8[6.3,] %cl_1_11[6.6,] %cl_1_13[6.8,] 	 SYMBOL:	 ARGS:%cl_1_11,%cl_1_13,
		 10: ATTRASSIGN img->[] %cl_1_6[6.1,] %cl_1_14[6.9,] 
		 11: RETURN %cl_1_14[6.9,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_1_15 
		 1: def_%cl_1_16 %cl_1_15[7.0,] 
		 2: RETURN %cl_1_16[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 10: RETURN %v_5[2.9,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = add_rel_nofollow_to_user_content instanceMethod = false
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_doc 
		 6: 
		 7: COPY TYPE_Array def_%v_3 
		 8: COPY TYPE_PASS def_whitelist %v_3[2.7,] 
		 9: 
		 10: (SiteSetting) def_%v_4 
		 11: %v_4->exclude_rel_nofollow_domains def_%v_5 %v_4[2.10,] 	 SYMBOL:	 ARGS:
		 12: COPY TYPE_PASS def_domains %v_5[2.11,] 
		 13: 
		 14: %v_5->present? def_%v_6 %v_5[2.11,] 	 SYMBOL:	 ARGS:
		 15: BRANCH %v_6[2.14,] 
BB 3
	outgoing: 5 
	datadep: 
	instructions:
		 0: COPY TYPE_StringLiteral "|" def_%v_7 
		 1: domains->split def_%v_8 domains[2.12,] %v_7[3.0,] 	 SYMBOL:	 ARGS:%v_7,
		 2: COPY TYPE_PASS def_whitelist %v_8[3.1,] 
		 3: 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_8 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_Nil def_site_uri 
		 2: 
		 3: COPY TYPE_StringLiteral "a" def_%v_9 
		 4: doc->css def_%v_10 doc[2.5,] %v_9[5.3,] 	 SYMBOL:	 ARGS:%v_9,
		 5: %v_10->each def_%v_11 %v_10[5.4,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_10,
CLOSURE BEGIN: l[] %self[2.0,] href[] site_uri[5.1,] uri[] whitelist[3.2,2.8,] u[] 
BB 1
	outgoing: 30 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_l 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 28 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "href" def_%cl_1_3 
		 2: l->[] def_%cl_1_4 l[2.2,] %cl_1_3[3.1,] 	 SYMBOL:	 ARGS:%cl_1_3,
		 3: %cl_1_4->to_s def_%cl_1_5 %cl_1_4[3.2,] 	 SYMBOL:	 ARGS:
		 4: COPY TYPE_PASS def_href %cl_1_5[3.3,] 
		 5: 
		 6: GLOBALVAR $! def_%cl_1_6 
BB 4
	outgoing: 6 7 18 
	datadep: 
	instructions:
		 0: 
		 1: 
		 2: %self->URI def_%cl_1_9 %self[2.0,] href[3.4,] 	 SYMBOL:	 ARGS:href,
		 3: COPY TYPE_PASS def_uri %cl_1_9[4.2,] 
		 4: 
		 5: COPY TYPE_PASS def_%cl_1_10 site_uri[] 
		 6: COPY TYPE_PASS def_%cl_1_11 site_uri[] 
		 7: BRANCH site_uri[] 
BB 6
	outgoing: 7 18 
	datadep: 
	instructions:
		 0: (Discourse) def_%cl_1_12 
		 1: %cl_1_12->base_url def_%cl_1_13 %cl_1_12[6.0,] 	 SYMBOL:	 ARGS:
		 2: %self->URI def_%cl_1_14 %self[2.0,] %cl_1_13[6.1,] 	 SYMBOL:	 ARGS:%cl_1_13,
		 3: COPY TYPE_PASS def_site_uri %cl_1_14[6.2,] 
		 4: COPY TYPE_PASS def_%cl_1_11 %cl_1_14[6.2,] 
BB 7
	outgoing: 8 9 18 
	datadep: 
	instructions:
		 0: 
		 1: uri->host def_%cl_1_15 uri[4.3,] 	 SYMBOL:	 ARGS:
		 2: %cl_1_15->present? def_%cl_1_16 %cl_1_15[7.1,] 	 SYMBOL:	 ARGS:
		 3: %cl_1_16->! def_%cl_1_17 %cl_1_16[7.2,] 	 SYMBOL:	 ARGS:
		 4: BRANCH %cl_1_17[7.3,] 
BB 8
	outgoing: 9 18 
	datadep: 
	instructions:
		 0: uri->host def_%cl_1_18 uri[4.3,] 	 SYMBOL:	 ARGS:
		 1: site_uri->host def_%cl_1_19 site_uri[6.3,] 	 SYMBOL:	 ARGS:
		 2: %cl_1_18->== def_%cl_1_20 %cl_1_18[8.0,] %cl_1_19[8.1,] 	 SYMBOL:	 ARGS:%cl_1_19,
		 3: COPY TYPE_PASS def_%cl_1_17 %cl_1_20[8.2,] 
BB 9
	outgoing: 10 11 
	datadep: 
	instructions:
		 0: BRANCH %cl_1_17[8.3,7.3,] 
BB 10
	outgoing: 11 18 
	datadep: 
	instructions:
		 0: uri->host def_%cl_1_21 uri[4.3,] 	 SYMBOL:	 ARGS:
		 1: COPY TYPE_StringLiteral "." def_%cl_1_22 
		 2: site_uri->host def_%cl_1_23 site_uri[6.3,] 	 SYMBOL:	 ARGS:
		 3: %cl_1_22-><< def_%cl_1_24 %cl_1_22[10.1,] %cl_1_23[10.2,] 	 SYMBOL:	 ARGS:%cl_1_23,
		 4: %cl_1_21->ends_with? def_%cl_1_25 %cl_1_21[10.0,] %cl_1_24[10.3,] 	 SYMBOL:	 ARGS:%cl_1_24,
		 5: COPY TYPE_PASS def_%cl_1_17 %cl_1_25[10.4,] 
BB 11
	outgoing: 12 13 
	datadep: 
	instructions:
		 0: BRANCH %cl_1_17[10.5,8.3,7.3,] 
BB 12
	outgoing: 13 18 
	datadep: 
	instructions:
		 0: whitelist->any? def_%cl_1_26 whitelist[] %self[2.0,] 	 SYMBOL:	 ARGS:whitelist,
CLOSURE BEGIN: uri[4.3,] u[] 
BB 1
	outgoing: 8 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_2_0 
		 2: RECEIVEARG def_u 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 6 
	datadep: 
	instructions:
		 0: 
		 1: uri->host def_%cl_2_3 uri[] 	 SYMBOL:	 ARGS:
		 2: %cl_2_3->== def_%cl_2_4 %cl_2_3[3.1,] u[2.2,] 	 SYMBOL:	 ARGS:u,
		 3: BRANCH %cl_2_4[3.2,] 
BB 4
	outgoing: 6 8 
	datadep: 
	instructions:
		 0: uri->host def_%cl_2_5 uri[] 	 SYMBOL:	 ARGS:
		 1: COPY TYPE_StringLiteral "." def_%cl_2_6 
		 2: %cl_2_6-><< def_%cl_2_7 %cl_2_6[4.1,] u[2.2,] 	 SYMBOL:	 ARGS:u,
		 3: %cl_2_5->ends_with? def_%cl_2_8 %cl_2_5[4.0,] %cl_2_7[4.2,] 	 SYMBOL:	 ARGS:%cl_2_7,
		 4: RETURN %cl_2_8[4.3,] %self[2.0,] 
BB 5
	outgoing: 8 
	datadep: 
	instructions:
		 0: RETURN %cl_2_4[3.2,] %self[2.0,] 
BB 6
	outgoing: 8 
	datadep: 
	instructions:
		 0: def_%cl_2_9 
		 1: def_%cl_2_10 %cl_2_9[6.0,] 
		 2: RETURN %cl_2_10[6.1,] %self[2.0,] 
BB 8
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 1: COPY TYPE_PASS def_%cl_1_17 %cl_1_26[12.0,] 
BB 13
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: BRANCH %cl_1_17[12.1,10.5,8.3,7.3,] 
BB 14
	outgoing: 16 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_27 
		 1: 
BB 15
	outgoing: 16 18 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "rel" def_%cl_1_28 
		 2: COPY TYPE_StringLiteral "nofollow" def_%cl_1_29 
		 3: ATTRASSIGN l->[] %cl_1_28[15.1,] %cl_1_29[15.2,] 
		 4: COPY TYPE_PASS def_%cl_1_27 %cl_1_29[15.2,] 
BB 16
	outgoing: 17 18 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%cl_1_8 %cl_1_27[15.4,14.0,] 
		 1: %cl_1_6[3.6,] 
BB 17
	outgoing: 27 
	datadep: 
	instructions:
		 0: 
BB 18
	outgoing: 19 20 26 
	datadep: 
	instructions:
		 0: def_%cl_1_30 
		 1: (URI) def_%cl_1_31 
		 2: (inherit InvalidURIError) def_%cl_1_32 %cl_1_31[18.1,] 
		 3: %cl_1_32[18.2,] 
BB 19
	outgoing: 20 26 
	datadep: 
	instructions:
		 0: %cl_1_31->const_missing def_%cl_1_32 %cl_1_31[18.1,] 	 SYMBOL:InvalidURIError,	 ARGS:Symbol,
BB 20
	outgoing: 21 22 26 
	datadep: 
	instructions:
		 0: (URI) def_%cl_1_33 
		 1: (inherit InvalidComponentError) def_%cl_1_34 %cl_1_33[20.0,] 
		 2: %cl_1_34[20.1,] 
BB 21
	outgoing: 22 26 
	datadep: 
	instructions:
		 0: %cl_1_33->const_missing def_%cl_1_34 %cl_1_33[20.0,] 	 SYMBOL:InvalidComponentError,	 ARGS:Symbol,
BB 22
	outgoing: 23 24 26 
	datadep: 
	instructions:
		 0: def_%cl_1_35 %cl_1_32[19.0,18.2,] %cl_1_34[21.0,20.1,] %cl_1_30[18.0,] 
		 1: BRANCH %cl_1_35[22.0,] 
BB 23
	outgoing: 26 30 
	datadep: 
	instructions:
		 0: %cl_1_30[18.0,] 
BB 24
	outgoing: 25 26 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "rel" def_%cl_1_36 
		 2: COPY TYPE_StringLiteral "nofollow" def_%cl_1_37 
		 3: ATTRASSIGN l->[] %cl_1_36[24.1,] %cl_1_37[24.2,] 
		 4: COPY TYPE_PASS def_%cl_1_8 %cl_1_37[24.2,] 
		 5: %cl_1_6[3.6,] 
BB 25
	outgoing: 27 
	datadep: 
	instructions:
		 0: 
BB 26
	outgoing: 28 30 
	datadep: 
	instructions:
		 0: def_%cl_1_38 
		 1: def_%cl_1_39 %cl_1_38[26.0,] %cl_1_6[3.6,] 
		 2: %cl_1_38[26.0,] 
BB 27
	outgoing: 30 
	datadep: 
	instructions:
		 0: RETURN %cl_1_8[16.0,24.4,] %self[2.0,] 
BB 28
	outgoing: 30 
	datadep: 
	instructions:
		 0: def_%cl_1_40 
		 1: def_%cl_1_41 %cl_1_40[28.0,] 
		 2: RETURN %cl_1_41[28.1,] %self[2.0,] 
BB 30
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: site_uri[6.3,] href[3.4,] uri[4.3,] 
		 6: RETURN %v_11[5.5,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = initialize instanceMethod = true
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_url 
		 6: RECEIVECONSTARG def_is_quote 
		 7: is_quote[2.6,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: COPY TYPE_Boolean def_is_quote 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: 
		 1: ATTRASSIGN %self->url url[2.5,] 
		 2: 
		 3: ATTRASSIGN %self->is_quote is_quote[3.0,2.6,] 
		 4: RETURN is_quote[3.0,2.6,] %self[4.1,4.3,2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = extract_links instanceMethod = false
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_html 
		 6: 
		 7: COPY TYPE_Array def_%v_3 
		 8: COPY TYPE_PASS def_links %v_3[2.7,] 
		 9: 
		 10: (Nokogiri) def_%v_4 
		 11: (inherit HTML) def_%v_5 %v_4[2.10,] 
		 12: %v_5[2.11,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[2.10,] 	 SYMBOL:HTML,	 ARGS:Symbol,
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: %v_5->fragment def_%v_6 %v_5[3.0,2.11,] html[2.5,] 	 SYMBOL:	 ARGS:html,
		 1: COPY TYPE_PASS def_doc %v_6[4.0,] 
		 2: 
		 3: COPY TYPE_StringLiteral "aside.quote a" def_%v_7 
		 4: %v_6->css def_%v_8 %v_6[4.0,] %v_7[4.3,] 	 SYMBOL:	 ARGS:%v_7,
		 5: %v_8->each def_%v_9 %v_8[4.4,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_8,
CLOSURE BEGIN: l[] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_l 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "href" def_%cl_1_3 
		 2: COPY TYPE_StringLiteral "" def_%cl_1_4 
		 3: ATTRASSIGN l->[] %cl_1_3[3.1,] %cl_1_4[3.2,] 
		 4: RETURN %cl_1_4[3.2,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_5 
		 1: def_%cl_1_6 %cl_1_5[4.0,] 
		 2: RETURN %cl_1_6[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 6: 
		 7: COPY TYPE_StringLiteral "a" def_%v_10 
		 8: doc->css def_%v_11 doc[4.1,] %v_10[4.7,] 	 SYMBOL:	 ARGS:%v_10,
		 9: %v_11->each def_%v_12 %v_11[4.8,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_11,
CLOSURE BEGIN: l[4.5,] links[2.8,] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_2_0 
		 2: RECEIVEARG def_l 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "href" def_%cl_2_3 
		 2: l->[] def_%cl_2_4 l[2.2,] %cl_2_3[3.1,] 	 SYMBOL:	 ARGS:%cl_2_3,
		 3: %cl_2_4->blank? def_%cl_2_5 %cl_2_4[3.2,] 	 SYMBOL:	 ARGS:
		 4: BRANCH %cl_2_5[3.3,] 
BB 4
	outgoing: 9 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_2_6 
		 1: RETURN %cl_2_6[4.0,] %self[2.0,] 
BB 5
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: (DetectedLink) def_%cl_2_7 
		 2: COPY TYPE_StringLiteral "href" def_%cl_2_8 
		 3: l->[] def_%cl_2_9 l[2.2,] %cl_2_8[5.2,] 	 SYMBOL:	 ARGS:%cl_2_8,
		 4: %cl_2_7->new def_%cl_2_10 %cl_2_7[5.1,] %cl_2_9[5.3,] 	 SYMBOL:	 ARGS:%cl_2_9,
		 5: links-><< def_%cl_2_11 links[] %cl_2_10[5.4,] 	 SYMBOL:	 ARGS:%cl_2_10,
		 6: RETURN %cl_2_11[5.5,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_2_12 
		 1: def_%cl_2_13 %cl_2_12[7.0,] 
		 2: RETURN %cl_2_13[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 10: 
		 11: COPY TYPE_StringLiteral "aside.quote[data-topic]" def_%v_13 
		 12: doc->css def_%v_14 doc[4.1,4.8,] %v_13[4.11,] 	 SYMBOL:	 ARGS:%v_13,
		 13: %v_14->each def_%v_15 %v_14[4.12,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_14,
CLOSURE BEGIN: a[] post_number[] url[] links[2.8,] 
BB 1
	outgoing: 9 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_3_0 
		 2: RECEIVEARG def_a 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 5 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "data-topic" def_%cl_3_3 
		 2: a->[] def_%cl_3_4 a[2.2,] %cl_3_3[3.1,] 	 SYMBOL:	 ARGS:%cl_3_3,
		 3: COPY TYPE_PASS def_topic_id %cl_3_4[3.2,] 
		 4: 
		 5: COPY TYPE_StringLiteral "/t/topic/" def_%cl_3_5 
		 6: BUILDSTRING def_%cl_3_6 %cl_3_5[3.5,] %cl_3_4[3.2,] 
		 7: COPY TYPE_PASS def_url %cl_3_6[3.6,] 
		 8: 
		 9: COPY TYPE_StringLiteral "data-post" def_%cl_3_7 
		 10: a->[] def_%cl_3_8 a[3.2,2.2,] %cl_3_7[3.9,] 	 SYMBOL:	 ARGS:%cl_3_7,
		 11: COPY TYPE_PASS def_post_number %cl_3_8[3.10,] 
		 12: BRANCH %cl_3_8[3.10,] 
BB 4
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "/" def_%cl_3_9 
		 2: BUILDSTRING def_%cl_3_10 %cl_3_9[4.1,] post_number[3.11,] 
		 3: url-><< def_%cl_3_11 url[3.7,] %cl_3_10[4.2,] 	 SYMBOL:	 ARGS:%cl_3_10,
		 4: 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_3_11 
BB 6
	outgoing: 7 9 
	datadep: 
	instructions:
		 0: 
		 1: (DetectedLink) def_%cl_3_12 
		 2: %cl_3_12->new def_%cl_3_13 %cl_3_12[6.1,] url[3.7,] 	 SYMBOL:	 ARGS:url,Boolean,
		 3: links-><< def_%cl_3_14 links[] %cl_3_13[6.2,] 	 SYMBOL:	 ARGS:%cl_3_13,
		 4: RETURN %cl_3_14[6.3,] %self[2.0,] 
BB 7
	outgoing: 9 
	datadep: 
	instructions:
		 0: def_%cl_3_15 
		 1: def_%cl_3_16 %cl_3_15[7.0,] 
		 2: RETURN %cl_3_16[7.1,] %self[2.0,] 
BB 9
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: topic_id[3.3,] post_number[3.11,] url[3.7,] 
		 14: 
		 15: RETURN links[2.8,] %self[2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = excerpt instanceMethod = false
BB 1
	outgoing: 7 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_html 
		 6: RECEIVEARG def_max_length 
		 7: RECEIVECONSTARG def_options 
		 8: options[2.7,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: HASH- def_%v_3 
		 1: COPY TYPE_PASS def_options %v_3[3.0,] 
BB 4
	outgoing: 5 6 
	datadep: 
	instructions:
		 0: 
		 1: (Nokogiri) def_%v_4 
		 2: (inherit HTML) def_%v_5 %v_4[4.1,] 
		 3: %v_5[4.2,] 
BB 5
	outgoing: 6 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[4.1,] 	 SYMBOL:HTML,	 ARGS:Symbol,
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: %v_5->fragment def_%v_6 %v_5[5.0,4.2,] html[2.5,] 	 SYMBOL:	 ARGS:html,
		 1: COPY TYPE_PASS def_doc %v_6[6.0,] 
		 2: 
		 3: %self->strip_image_wrapping def_%v_7 %self[2.0,] %v_6[6.0,] 	 SYMBOL:	 ARGS:doc,
		 4: 
		 5: doc->to_html def_%v_8 doc[6.1,] 	 SYMBOL:	 ARGS:
		 6: COPY TYPE_PASS def_html %v_8[6.5,] 
		 7: 
		 8: (ExcerptParser) def_%v_9 
		 9: %v_9->get_excerpt def_%v_10 %v_9[6.8,] %v_8[6.5,] max_length[2.6,] options[3.1,2.7,] 	 SYMBOL:	 ARGS:html,max_length,options,
		 10: RETURN %v_10[6.9,] %self[6.3,2.0,] 
BB 7
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = strip_links instanceMethod = false
BB 1
	outgoing: 8 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_string 
		 6: 
		 7: string->blank? def_%v_3 string[2.5,] 	 SYMBOL:	 ARGS:
		 8: BRANCH %v_3[2.7,] 
BB 3
	outgoing: 8 
	datadep: 
	instructions:
		 0: RETURN string[2.5,] %self[2.0,] 
BB 4
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_4 
		 1: 
		 2: (Nokogiri) def_%v_5 
		 3: (inherit HTML) def_%v_6 %v_5[4.2,] 
		 4: %v_6[4.3,] 
BB 6
	outgoing: 7 
	datadep: 
	instructions:
		 0: %v_5->const_missing def_%v_6 %v_5[4.2,] 	 SYMBOL:HTML,	 ARGS:Symbol,
BB 7
	outgoing: 8 
	datadep: 
	instructions:
		 0: %v_6->fragment def_%v_7 %v_6[6.0,4.3,] string[2.5,] 	 SYMBOL:	 ARGS:string,
		 1: COPY TYPE_PASS def_fragment %v_7[7.0,] 
		 2: 
		 3: COPY TYPE_StringLiteral "a" def_%v_8 
		 4: %v_7->css def_%v_9 %v_7[7.0,] %v_8[7.3,] 	 SYMBOL:	 ARGS:%v_8,
		 5: %v_9->each def_%v_10 %v_9[7.4,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_9,
CLOSURE BEGIN: a[] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_a 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: a->inner_html def_%cl_1_3 a[2.2,] 	 SYMBOL:	 ARGS:
		 2: a->replace def_%cl_1_4 a[3.1,2.2,] %cl_1_3[3.1,] 	 SYMBOL:	 ARGS:%cl_1_3,
		 3: RETURN %cl_1_4[3.2,] %self[2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_5 
		 1: def_%cl_1_6 %cl_1_5[4.0,] 
		 2: RETURN %cl_1_6[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 6: 
		 7: fragment->to_html def_%v_11 fragment[7.1,] 	 SYMBOL:	 ARGS:
		 8: RETURN %v_11[7.7,] %self[2.0,] 
BB 8
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = make_all_links_absolute instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_doc 
		 6: 
		 7: COPY TYPE_Nil def_site_uri 
		 8: 
		 9: COPY TYPE_StringLiteral "a" def_%v_3 
		 10: doc->css def_%v_4 doc[2.5,] %v_3[2.9,] 	 SYMBOL:	 ARGS:%v_3,
		 11: %v_4->each def_%v_5 %v_4[2.10,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_4,
CLOSURE BEGIN: link[] %self[2.0,] href[] site_uri[2.7,] uri[] 
BB 1
	outgoing: 24 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_link 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 22 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_StringLiteral "href" def_%cl_1_3 
		 2: link->[] def_%cl_1_4 link[2.2,] %cl_1_3[3.1,] 	 SYMBOL:	 ARGS:%cl_1_3,
		 3: %cl_1_4->to_s def_%cl_1_5 %cl_1_4[3.2,] 	 SYMBOL:	 ARGS:
		 4: COPY TYPE_PASS def_href %cl_1_5[3.3,] 
		 5: 
		 6: GLOBALVAR $! def_%cl_1_6 
BB 4
	outgoing: 6 7 12 
	datadep: 
	instructions:
		 0: 
		 1: 
		 2: %self->URI def_%cl_1_9 %self[2.0,] href[3.4,] 	 SYMBOL:	 ARGS:href,
		 3: COPY TYPE_PASS def_uri %cl_1_9[4.2,] 
		 4: 
		 5: COPY TYPE_PASS def_%cl_1_10 site_uri[] 
		 6: COPY TYPE_PASS def_%cl_1_11 site_uri[] 
		 7: BRANCH site_uri[] 
BB 6
	outgoing: 7 12 
	datadep: 
	instructions:
		 0: (Discourse) def_%cl_1_12 
		 1: %cl_1_12->base_url def_%cl_1_13 %cl_1_12[6.0,] 	 SYMBOL:	 ARGS:
		 2: %self->URI def_%cl_1_14 %self[2.0,] %cl_1_13[6.1,] 	 SYMBOL:	 ARGS:%cl_1_13,
		 3: COPY TYPE_PASS def_site_uri %cl_1_14[6.2,] 
		 4: COPY TYPE_PASS def_%cl_1_11 %cl_1_14[6.2,] 
BB 7
	outgoing: 8 9 12 
	datadep: 
	instructions:
		 0: 
		 1: uri->host def_%cl_1_15 uri[4.3,] 	 SYMBOL:	 ARGS:
		 2: %cl_1_15->present? def_%cl_1_16 %cl_1_15[7.1,] 	 SYMBOL:	 ARGS:
		 3: BRANCH %cl_1_16[7.2,] 
BB 8
	outgoing: 10 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_17 
		 1: 
BB 9
	outgoing: 10 12 
	datadep: 
	instructions:
		 0: COPY TYPE_StringLiteral "href" def_%cl_1_18 
		 1: COPY TYPE_StringLiteral "href" def_%cl_1_19 
		 2: link->[] def_%cl_1_20 link[2.2,] %cl_1_19[9.1,] 	 SYMBOL:	 ARGS:%cl_1_19,
		 3: BUILDSTRING def_%cl_1_21 site_uri[6.3,] %cl_1_20[9.2,] 
		 4: ATTRASSIGN link->[] %cl_1_18[9.0,] %cl_1_21[9.3,] 
		 5: COPY TYPE_PASS def_%cl_1_17 %cl_1_21[9.3,] 
BB 10
	outgoing: 11 12 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%cl_1_8 %cl_1_17[9.5,8.0,] 
		 1: 
		 2: %cl_1_6[3.6,] 
BB 11
	outgoing: 21 
	datadep: 
	instructions:
		 0: 
BB 12
	outgoing: 13 14 20 
	datadep: 
	instructions:
		 0: 
		 1: def_%cl_1_22 
		 2: (URI) def_%cl_1_23 
		 3: (inherit InvalidURIError) def_%cl_1_24 %cl_1_23[12.2,] 
		 4: %cl_1_24[12.3,] 
BB 13
	outgoing: 14 20 
	datadep: 
	instructions:
		 0: %cl_1_23->const_missing def_%cl_1_24 %cl_1_23[12.2,] 	 SYMBOL:InvalidURIError,	 ARGS:Symbol,
BB 14
	outgoing: 15 16 20 
	datadep: 
	instructions:
		 0: (URI) def_%cl_1_25 
		 1: (inherit InvalidComponentError) def_%cl_1_26 %cl_1_25[14.0,] 
		 2: %cl_1_26[14.1,] 
BB 15
	outgoing: 16 20 
	datadep: 
	instructions:
		 0: %cl_1_25->const_missing def_%cl_1_26 %cl_1_25[14.0,] 	 SYMBOL:InvalidComponentError,	 ARGS:Symbol,
BB 16
	outgoing: 17 18 20 
	datadep: 
	instructions:
		 0: def_%cl_1_27 %cl_1_24[13.0,12.3,] %cl_1_26[15.0,14.1,] %cl_1_22[12.1,] 
		 1: BRANCH %cl_1_27[16.0,] 
BB 17
	outgoing: 20 24 
	datadep: 
	instructions:
		 0: %cl_1_22[12.1,] 
BB 18
	outgoing: 19 20 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_8 
		 1: 
		 2: %cl_1_6[3.6,] 
BB 19
	outgoing: 21 
	datadep: 
	instructions:
		 0: 
BB 20
	outgoing: 22 24 
	datadep: 
	instructions:
		 0: def_%cl_1_28 
		 1: def_%cl_1_29 %cl_1_28[20.0,] %cl_1_6[3.6,] 
		 2: %cl_1_28[20.0,] 
BB 21
	outgoing: 24 
	datadep: 
	instructions:
		 0: RETURN %cl_1_8[10.0,18.0,] %self[2.0,] 
BB 22
	outgoing: 24 
	datadep: 
	instructions:
		 0: def_%cl_1_30 
		 1: def_%cl_1_31 %cl_1_30[22.0,] 
		 2: RETURN %cl_1_31[22.1,] %self[2.0,] 
BB 24
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: site_uri[6.3,] href[3.4,] uri[4.3,] 
		 12: RETURN %v_5[2.11,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = strip_image_wrapping instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_doc 
		 6: 
		 7: COPY TYPE_StringLiteral ".lightbox-wrapper .meta" def_%v_3 
		 8: doc->css def_%v_4 doc[2.5,] %v_3[2.7,] 	 SYMBOL:	 ARGS:%v_3,
		 9: %v_4->remove def_%v_5 %v_4[2.8,] 	 SYMBOL:	 ARGS:
		 10: RETURN %v_5[2.9,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = format_for_email instanceMethod = false
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_html 
		 6: 
		 7: (Nokogiri) def_%v_3 
		 8: (inherit HTML) def_%v_4 %v_3[2.7,] 
		 9: %v_4[2.8,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_3->const_missing def_%v_4 %v_3[2.7,] 	 SYMBOL:HTML,	 ARGS:Symbol,
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: %v_4->fragment def_%v_5 %v_4[3.0,2.8,] html[2.5,] 	 SYMBOL:	 ARGS:html,
		 1: COPY TYPE_PASS def_doc %v_5[4.0,] 
		 2: 
		 3: %self->make_all_links_absolute def_%v_6 %self[2.0,] %v_5[4.0,] 	 SYMBOL:	 ARGS:doc,
		 4: 
		 5: %self->strip_image_wrapping def_%v_7 %self[4.3,2.0,] doc[4.1,] 	 SYMBOL:	 ARGS:doc,
		 6: 
		 7: doc->to_html def_%v_8 doc[4.1,] 	 SYMBOL:	 ARGS:
		 8: RETURN %v_8[4.7,] %self[4.3,4.5,2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = initialize instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_message 
		 6: RECEIVEARG def_backtrace 
		 7: 
		 8: ATTRASSIGN %self->message message[2.5,] 
		 9: 
		 10: ATTRASSIGN %self->backtrace backtrace[2.6,] 
		 11: RETURN backtrace[2.6,] %self[2.0,2.8,2.10,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = protect instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: COPY TYPE_Nil def_rval 
		 7: 
		 8: GETFIELD %self->mutex def_%v_3 %self[2.0,] 
		 9: %v_3->synchronize def_%v_4 %v_3[2.8,] %self[2.0,] 	 SYMBOL:	 ARGS:%v_3,
CLOSURE BEGIN: e[] %self[2.0,] 
BB 1
	outgoing: 17 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: GLOBALVAR $! def_%cl_1_3 
BB 4
	outgoing: 6 7 
	datadep: 
	instructions:
		 0: 
		 1: 
		 2: def_%cl_1_6 %cl_1_0[2.1,] 
		 3: COPY TYPE_PASS def_rval %cl_1_6[4.2,] 
		 4: COPY TYPE_PASS def_%cl_1_5 %cl_1_6[4.2,] 
		 5: %cl_1_3[2.5,] 
BB 6
	outgoing: 14 
	datadep: 
	instructions:
		 0: 
BB 7
	outgoing: 8 9 13 
	datadep: 
	instructions:
		 0: def_%cl_1_7 
		 1: (V8) def_%cl_1_8 
		 2: (inherit Error) def_%cl_1_9 %cl_1_8[7.1,] 
		 3: %cl_1_9[7.2,] 
BB 8
	outgoing: 9 13 
	datadep: 
	instructions:
		 0: %cl_1_8->const_missing def_%cl_1_9 %cl_1_8[7.1,] 	 SYMBOL:Error,	 ARGS:Symbol,
BB 9
	outgoing: 10 11 13 
	datadep: 
	instructions:
		 0: def_%cl_1_10 %cl_1_9[8.0,7.2,] %cl_1_7[7.0,] 
		 1: BRANCH %cl_1_10[9.0,] 
BB 10
	outgoing: 13 17 
	datadep: 
	instructions:
		 0: %cl_1_7[7.0,] 
BB 11
	outgoing: 12 13 
	datadep: 
	instructions:
		 0: GLOBALVAR $! def_%cl_1_11 
		 1: COPY TYPE_PASS def_e %cl_1_11[11.0,] 
		 2: 
		 3: (JavaScriptError) def_%cl_1_12 
		 4: %cl_1_11->message def_%cl_1_13 %cl_1_11[11.0,] 	 SYMBOL:	 ARGS:
		 5: e->backtrace def_%cl_1_14 e[11.1,] 	 SYMBOL:	 ARGS:
		 6: %cl_1_12->new def_%cl_1_15 %cl_1_12[11.3,] %cl_1_13[11.4,] %cl_1_14[11.5,] 	 SYMBOL:	 ARGS:%cl_1_13,%cl_1_14,
		 7: %self->raise def_%cl_1_16 %self[2.0,] %cl_1_15[11.6,] 	 SYMBOL:	 ARGS:%cl_1_15,
		 8: COPY TYPE_PASS def_%cl_1_5 %cl_1_16[11.7,] 
		 9: %cl_1_3[2.5,] 
BB 12
	outgoing: 14 
	datadep: 
	instructions:
		 0: 
BB 13
	outgoing: 15 17 
	datadep: 
	instructions:
		 0: def_%cl_1_17 
		 1: def_%cl_1_18 %cl_1_17[13.0,] %cl_1_3[2.5,] 
		 2: %cl_1_17[13.0,] 
BB 14
	outgoing: 17 
	datadep: 
	instructions:
		 0: RETURN %cl_1_5[4.4,11.8,] %self[2.0,] 
BB 15
	outgoing: 17 
	datadep: 
	instructions:
		 0: def_%cl_1_19 
		 1: def_%cl_1_20 %cl_1_19[15.0,] 
		 2: RETURN %cl_1_20[15.1,] %self[2.0,] 
BB 17
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: rval[4.3,] 
		 10: 
		 11: RETURN rval[2.6,2.9,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = ctx_load instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_ctx 
		 6: RECEIVEARG def_files 
		 7: 
		 8: files->each def_%v_3 files[2.6,] %self[2.0,] 	 SYMBOL:	 ARGS:files,
CLOSURE BEGIN: %self[2.0,] file[] ctx[2.5,] 
BB 1
	outgoing: 6 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: RECEIVEARG def_file 
		 3: COPY TYPE_CurrentScope def_%current_scope 
		 4: COPY TYPE_ScopeModule def_%current_module 
BB 3
	outgoing: 4 6 
	datadep: 
	instructions:
		 0: 
		 1: %self->app_root def_%cl_1_3 %self[2.0,] 	 SYMBOL:	 ARGS:
		 2: %cl_1_3->+ def_%cl_1_4 %cl_1_3[3.1,] file[2.2,] 	 SYMBOL:	 ARGS:file,
		 3: ctx->load def_%cl_1_5 ctx[] %cl_1_4[3.2,] 	 SYMBOL:	 ARGS:%cl_1_4,
		 4: RETURN %cl_1_5[3.3,] %self[3.1,2.0,] 
BB 4
	outgoing: 6 
	datadep: 
	instructions:
		 0: def_%cl_1_6 
		 1: def_%cl_1_7 %cl_1_6[4.0,] 
		 2: RETURN %cl_1_7[4.1,] %self[2.0,] 
BB 6
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: 
		 9: RETURN %v_3[2.8,] %self[2.0,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

