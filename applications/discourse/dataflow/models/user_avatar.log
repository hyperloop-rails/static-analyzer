SET IRMethod, name = contains_upload? instanceMethod = true
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_id 
		 6: 
		 7: %self->gravatar_upload_id def_%v_3 %self[2.0,] 	 SYMBOL:	 ARGS:
		 8: %v_3->== def_%v_4 %v_3[2.7,] id[2.5,] 	 SYMBOL:	 ARGS:id,
		 9: BRANCH %v_4[2.8,] 
BB 3
	outgoing: 5 
	datadep: 
	instructions:
		 0: %self->custom_upload_id def_%v_5 %self[2.0,] 	 SYMBOL:	 ARGS:
		 1: %v_5->== def_%v_6 %v_5[3.0,] id[2.5,] 	 SYMBOL:	 ARGS:id,
		 2: RETURN %v_6[3.1,] %self[3.0,2.0,] 
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: RETURN %v_4[2.8,] %self[2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = update_gravatar! instanceMethod = true
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: 
		 6: (DistributedMutex) def_%v_3 
		 7: COPY TYPE_StringLiteral "update_gravatar_" def_%v_4 
		 8: %self->user_id def_%v_5 %self[2.0,] 	 SYMBOL:	 ARGS:
		 9: BUILDSTRING def_%v_6 %v_4[2.7,] %v_5[2.8,] 
		 10: %v_3->synchronize def_%v_7 %v_3[2.6,] %v_6[2.9,] %self[2.0,2.8,] 	 SYMBOL:	 ARGS:%v_6,%v_3,
CLOSURE BEGIN: %self[2.0,2.8,] email_hash[] gravatar_url[] tempfile[] upload[] 
BB 1
	outgoing: 38 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%cl_1_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: GLOBALVAR $! def_%cl_1_3 
BB 4
	outgoing: 6 7 24 
	datadep: 
	instructions:
		 0: 
		 1: 
		 2: %self->user_id def_%cl_1_7 %self[2.0,] 	 SYMBOL:	 ARGS:
		 3: (Discourse) def_%cl_1_8 
		 4: (inherit SYSTEM_USER_ID) def_%cl_1_9 %cl_1_8[4.3,] 
		 5: %cl_1_9[4.4,] 
BB 6
	outgoing: 7 24 
	datadep: 
	instructions:
		 0: %cl_1_8->const_missing def_%cl_1_9 %cl_1_8[4.3,] 	 SYMBOL:SYSTEM_USER_ID,	 ARGS:Symbol,
BB 7
	outgoing: 8 9 24 
	datadep: 
	instructions:
		 0: %cl_1_7->== def_%cl_1_10 %cl_1_7[4.2,] %cl_1_9[6.0,4.4,] 	 SYMBOL:	 ARGS:%cl_1_9,
		 1: BRANCH %cl_1_10[7.0,] 
BB 8
	outgoing: 10 24 
	datadep: 
	instructions:
		 0: (User) def_%cl_1_11 
		 1: COPY TYPE_StringLiteral "info@discourse.org" def_%cl_1_12 
		 2: %cl_1_11->email_hash def_%cl_1_13 %cl_1_11[8.0,] %cl_1_12[8.1,] 	 SYMBOL:	 ARGS:%cl_1_12,
		 3: 
BB 9
	outgoing: 10 24 
	datadep: 
	instructions:
		 0: %self->user def_%cl_1_14 %self[2.0,] 	 SYMBOL:	 ARGS:
		 1: %cl_1_14->email_hash def_%cl_1_15 %cl_1_14[9.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%cl_1_13 %cl_1_15[9.1,] 
BB 10
	outgoing: 11 21 24 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_email_hash %cl_1_13[9.2,8.2,] 
		 1: 
		 2: (Time) def_%cl_1_16 
		 3: %cl_1_16->new def_%cl_1_17 %cl_1_16[10.2,] 	 SYMBOL:	 ARGS:
		 4: ATTRASSIGN %self->last_gravatar_download_attempt %cl_1_17[10.3,] 
		 5: 
		 6: (Discourse) def_%cl_1_18 
		 7: %cl_1_18->avatar_sizes def_%cl_1_19 %cl_1_18[10.6,] 	 SYMBOL:	 ARGS:
		 8: %cl_1_19->max def_%cl_1_20 %cl_1_19[10.7,] 	 SYMBOL:	 ARGS:
		 9: COPY TYPE_PASS def_max %cl_1_20[10.8,] 
		 10: 
		 11: COPY TYPE_StringLiteral "http://www.gravatar.com/avatar/" def_%cl_1_21 
		 12: COPY TYPE_StringLiteral ".png?s=" def_%cl_1_22 
		 13: COPY TYPE_StringLiteral "&d=404" def_%cl_1_23 
		 14: BUILDSTRING def_%cl_1_24 %cl_1_21[10.11,] email_hash[10.0,] %cl_1_22[10.12,] %cl_1_20[10.8,] %cl_1_23[10.13,] 
		 15: COPY TYPE_PASS def_gravatar_url %cl_1_24[10.14,] 
		 16: 
		 17: (FileHelper) def_%cl_1_25 
		 18: (SiteSetting) def_%cl_1_26 
		 19: %cl_1_26->max_image_size_kb def_%cl_1_27 %cl_1_26[10.18,] 	 SYMBOL:	 ARGS:
		 20: %cl_1_27->kilobytes def_%cl_1_28 %cl_1_27[10.19,] 	 SYMBOL:	 ARGS:
		 21: COPY TYPE_StringLiteral "gravatar" def_%cl_1_29 
		 22: %cl_1_25->download def_%cl_1_30 %cl_1_25[10.17,] gravatar_url[10.15,] %cl_1_28[10.20,] %cl_1_29[10.21,] 	 SYMBOL:	 ARGS:gravatar_url,%cl_1_28,%cl_1_29,
		 23: COPY TYPE_PASS def_tempfile %cl_1_30[10.22,] 
		 24: 
		 25: (Upload) def_%cl_1_31 
		 26: %self->user_id def_%cl_1_32 %self[10.4,2.0,] 	 SYMBOL:	 ARGS:
		 27: COPY TYPE_StringLiteral "gravatar.png" def_%cl_1_33 
		 28: (File) def_%cl_1_34 
		 29: tempfile->path def_%cl_1_35 tempfile[10.23,] 	 SYMBOL:	 ARGS:
		 30: %cl_1_34->size def_%cl_1_36 %cl_1_34[10.28,] %cl_1_35[10.29,] 	 SYMBOL:	 ARGS:%cl_1_35,
		 31: COPY TYPE_StringLiteral "avatar" def_%cl_1_37 
		 32: HASH-origin-image_type- def_%cl_1_38 gravatar_url[10.15,] %cl_1_37[10.31,] 
		 33: %cl_1_31->create_for def_%cl_1_39 %cl_1_31[10.25,] %cl_1_32[10.26,] tempfile[10.23,10.29,] %cl_1_33[10.27,] %cl_1_36[10.30,] %cl_1_38[10.32,] 	 SYMBOL:	 ARGS:%cl_1_32,tempfile,%cl_1_33,%cl_1_36,%cl_1_38,
		 34: COPY TYPE_PASS def_upload %cl_1_39[10.33,] 
		 35: 
		 36: %self->gravatar_upload_id def_%cl_1_40 %self[10.4,10.26,2.0,] 	 SYMBOL:	 ARGS:
		 37: upload->id def_%cl_1_41 upload[10.34,] 	 SYMBOL:	 ARGS:
		 38: %cl_1_40->!= def_%cl_1_42 %cl_1_40[10.36,] %cl_1_41[10.37,] 	 SYMBOL:	 ARGS:%cl_1_41,
		 39: BRANCH %cl_1_42[10.38,] 
BB 11
	outgoing: 13 
	datadep: 
	instructions:
		 0: 
		 1: GLOBALVAR $! def_%cl_1_43 
BB 13
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: 
		 1: %self->gravatar_upload def_%cl_1_46 %self[10.4,2.0,] 	 SYMBOL:	 ARGS:
		 2: %cl_1_46->try def_%cl_1_47 %cl_1_46[13.1,] 	 SYMBOL:destroy!,	 ARGS:Symbol,
		 3: COPY TYPE_PASS def_%cl_1_45 %cl_1_47[13.2,] 
		 4: 
		 5: %cl_1_43[11.1,] 
BB 14
	outgoing: 20 
	datadep: 
	instructions:
		 0: 
BB 15
	outgoing: 16 17 19 
	datadep: 
	instructions:
		 0: 
		 1: def_%cl_1_48 
		 2: def_%cl_1_49 %cl_1_48[15.1,] 
		 3: BRANCH %cl_1_49[15.2,] 
BB 16
	outgoing: 19 38 
	datadep: 
	instructions:
		 0: %cl_1_48[15.1,] 
BB 17
	outgoing: 18 19 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_45 
		 1: 
		 2: %cl_1_43[11.1,] 
BB 18
	outgoing: 20 
	datadep: 
	instructions:
		 0: 
BB 19
	outgoing: 24 38 
	datadep: 
	instructions:
		 0: def_%cl_1_50 
		 1: def_%cl_1_51 %cl_1_50[19.0,] %cl_1_43[11.1,] 
		 2: %cl_1_50[19.0,] 
BB 20
	outgoing: 22 24 
	datadep: 
	instructions:
		 0: 
		 1: ATTRASSIGN %self->gravatar_upload upload[10.34,] 
		 2: 
		 3: %self->save! def_%cl_1_52 %self[20.1,10.4,2.0,] 	 SYMBOL:	 ARGS:
		 4: 
BB 21
	outgoing: 22 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%cl_1_52 
BB 22
	outgoing: 23 24 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%cl_1_6 %cl_1_52[21.0,20.3,] 
		 1: %cl_1_3[2.5,] 
BB 23
	outgoing: 35 
	datadep: 
	instructions:
		 0: 
		 1: tempfile->try def_%cl_1_4 tempfile[10.23,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 2: 
BB 24
	outgoing: 25 26 33 
	datadep: 
	instructions:
		 0: def_%cl_1_53 
		 1: (OpenURI) def_%cl_1_54 
		 2: (inherit HTTPError) def_%cl_1_55 %cl_1_54[24.1,] 
		 3: %cl_1_55[24.2,] 
BB 25
	outgoing: 26 33 
	datadep: 
	instructions:
		 0: %cl_1_54->const_missing def_%cl_1_55 %cl_1_54[24.1,] 	 SYMBOL:HTTPError,	 ARGS:Symbol,
BB 26
	outgoing: 27 31 33 
	datadep: 
	instructions:
		 0: def_%cl_1_56 %cl_1_55[25.0,24.2,] %cl_1_53[24.0,] 
		 1: BRANCH %cl_1_56[26.0,] 
BB 27
	outgoing: 28 29 33 
	datadep: 
	instructions:
		 0: (SocketError) def_%cl_1_57 
		 1: def_%cl_1_58 %cl_1_57[27.0,] %cl_1_53[24.0,] 
		 2: BRANCH %cl_1_58[27.1,] 
BB 28
	outgoing: 33 38 
	datadep: 
	instructions:
		 0: %cl_1_53[24.0,] 
BB 29
	outgoing: 30 33 
	datadep: 
	instructions:
		 0: 
		 1: (Rails) def_%cl_1_59 
		 2: %cl_1_59->logger def_%cl_1_60 %cl_1_59[29.1,] 	 SYMBOL:	 ARGS:
		 3: COPY TYPE_StringLiteral "Failed to download gravatar, socket error - user id " def_%cl_1_61 
		 4: %self->user_id def_%cl_1_62 %self[10.4,20.1,2.0,] 	 SYMBOL:	 ARGS:
		 5: BUILDSTRING def_%cl_1_63 %cl_1_61[29.3,] %cl_1_62[29.4,] 
		 6: %cl_1_60->warn def_%cl_1_64 %cl_1_60[29.2,] %cl_1_63[29.5,] 	 SYMBOL:	 ARGS:%cl_1_63,
		 7: COPY TYPE_PASS def_%cl_1_6 %cl_1_64[29.6,] 
		 8: %cl_1_3[2.5,] 
BB 30
	outgoing: 35 
	datadep: 
	instructions:
		 0: 
		 1: tempfile->try def_%cl_1_4 tempfile[10.23,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 2: 
BB 31
	outgoing: 32 33 
	datadep: 
	instructions:
		 0: 
		 1: %self->save! def_%cl_1_65 %self[10.4,20.1,2.0,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%cl_1_6 %cl_1_65[31.1,] 
		 3: %cl_1_3[2.5,] 
BB 32
	outgoing: 35 
	datadep: 
	instructions:
		 0: 
		 1: tempfile->try def_%cl_1_4 tempfile[10.23,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 2: 
BB 33
	outgoing: 34 36 
	datadep: 
	instructions:
		 0: def_%cl_1_66 
		 1: def_%cl_1_67 %cl_1_66[33.0,] %cl_1_3[2.5,] 
BB 34
	outgoing: 36 38 
	datadep: 
	instructions:
		 0: 
		 1: tempfile->try def_%cl_1_4 tempfile[10.23,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 2: %cl_1_66[33.0,] 
BB 35
	outgoing: 38 
	datadep: 
	instructions:
		 0: RETURN %cl_1_6[22.0,29.7,31.2,] %self[20.1,10.4,2.0,] 
BB 36
	outgoing: 38 
	datadep: 
	instructions:
		 0: def_%cl_1_68 
		 1: def_%cl_1_69 %cl_1_68[36.0,] 
		 2: RETURN %cl_1_69[36.1,] %self[10.4,20.1,2.0,] 
BB 38
	outgoing: 
	datadep: 
	instructions:
CLOSURE END: max[10.9,] upload[10.34,] tempfile[10.23,] gravatar_url[10.15,] 
		 11: RETURN %v_7[2.10,] %self[2.0,2.8,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = local_avatar_url instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_hostname 
		 6: RECEIVEARG def_username 
		 7: RECEIVEARG def_upload_id 
		 8: RECEIVEARG def_size 
		 9: 
		 10: %self->local_avatar_template def_%v_3 %self[2.0,] hostname[2.5,] username[2.6,] upload_id[2.7,] 	 SYMBOL:	 ARGS:hostname,username,upload_id,
		 11: COPY TYPE_StringLiteral "{size}" def_%v_4 
		 12: size->to_s def_%v_5 size[2.8,] 	 SYMBOL:	 ARGS:
		 13: %v_3->gsub def_%v_6 %v_3[2.10,] %v_4[2.11,] %v_5[2.12,] 	 SYMBOL:	 ARGS:%v_4,%v_5,
		 14: RETURN %v_6[2.13,] %self[2.0,2.10,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = local_avatar_template instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_hostname 
		 6: RECEIVEARG def_username 
		 7: RECEIVEARG def_upload_id 
		 8: 
		 9: %self->version def_%v_3 %self[2.0,] upload_id[2.7,] 	 SYMBOL:	 ARGS:upload_id,
		 10: COPY TYPE_PASS def_version %v_3[2.9,] 
		 11: 
		 12: (Discourse) def_%v_4 
		 13: %v_4->base_uri def_%v_5 %v_4[2.12,] 	 SYMBOL:	 ARGS:
		 14: COPY TYPE_StringLiteral "/user_avatar/" def_%v_6 
		 15: COPY TYPE_StringLiteral "/" def_%v_7 
		 16: COPY TYPE_StringLiteral "/{size}/" def_%v_8 
		 17: COPY TYPE_StringLiteral ".png" def_%v_9 
		 18: BUILDSTRING def_%v_10 %v_5[2.13,] %v_6[2.14,] hostname[2.5,] %v_7[2.15,] username[2.6,] %v_8[2.16,] version[2.10,] %v_9[2.17,] 
		 19: RETURN %v_10[2.18,] %self[2.0,2.9,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = external_avatar_url instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_user_id 
		 6: RECEIVEARG def_upload_id 
		 7: RECEIVEARG def_size 
		 8: 
		 9: %self->external_avatar_template def_%v_3 %self[2.0,] user_id[2.5,] upload_id[2.6,] 	 SYMBOL:	 ARGS:user_id,upload_id,
		 10: COPY TYPE_StringLiteral "{size}" def_%v_4 
		 11: size->to_s def_%v_5 size[2.7,] 	 SYMBOL:	 ARGS:
		 12: %v_3->gsub def_%v_6 %v_3[2.9,] %v_4[2.10,] %v_5[2.11,] 	 SYMBOL:	 ARGS:%v_4,%v_5,
		 13: RETURN %v_6[2.12,] %self[2.0,2.9,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = external_avatar_template instanceMethod = false
BB 1
	outgoing: 3 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_user_id 
		 6: RECEIVEARG def_upload_id 
		 7: 
		 8: %self->version def_%v_3 %self[2.0,] upload_id[2.6,] 	 SYMBOL:	 ARGS:upload_id,
		 9: COPY TYPE_PASS def_version %v_3[2.8,] 
		 10: 
		 11: (Discourse) def_%v_4 
		 12: %v_4->store def_%v_5 %v_4[2.11,] 	 SYMBOL:	 ARGS:
		 13: %v_5->absolute_base_url def_%v_6 %v_5[2.12,] 	 SYMBOL:	 ARGS:
		 14: COPY TYPE_StringLiteral "/avatars/" def_%v_7 
		 15: COPY TYPE_StringLiteral "/{size}/" def_%v_8 
		 16: COPY TYPE_StringLiteral ".png" def_%v_9 
		 17: BUILDSTRING def_%v_10 %v_6[2.13,] %v_7[2.14,] user_id[2.5,] %v_8[2.15,] version[2.9,] %v_9[2.16,] 
		 18: RETURN %v_10[2.17,] %self[2.0,2.8,] 
BB 3
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = version instanceMethod = false
BB 1
	outgoing: 5 2 
	datadep: 
	instructions:
BB 2
	outgoing: 3 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_upload_id 
		 6: 
		 7: COPY TYPE_StringLiteral "_" def_%v_3 
		 8: (OptimizedImage) def_%v_4 
		 9: (inherit VERSION) def_%v_5 %v_4[2.8,] 
		 10: %v_5[2.9,] 
BB 3
	outgoing: 4 
	datadep: 
	instructions:
		 0: %v_4->const_missing def_%v_5 %v_4[2.8,] 	 SYMBOL:VERSION,	 ARGS:Symbol,
BB 4
	outgoing: 5 
	datadep: 
	instructions:
		 0: BUILDSTRING def_%v_6 upload_id[2.5,] %v_3[2.7,] %v_5[3.0,2.9,] 
		 1: RETURN %v_6[4.0,] %self[2.0,] 
BB 5
	outgoing: 
	datadep: 
	instructions:

SET IRMethod, name = import_url_for_user instanceMethod = false
BB 1
	outgoing: 34 2 
	datadep: 
	instructions:
BB 2
	outgoing: 4 
	datadep: 
	instructions:
		 0: def_%self 
		 1: def_%v_0 
		 2: COPY TYPE_CurrentScope def_%current_scope 
		 3: COPY TYPE_ScopeModule def_%current_module 
		 4: 
		 5: RECEIVEARG def_avatar_url 
		 6: RECEIVEARG def_user 
		 7: GLOBALVAR $! def_%v_3 
BB 4
	outgoing: 5 6 17 
	datadep: 
	instructions:
		 0: 
		 1: 
		 2: (FileHelper) def_%v_9 
		 3: (SiteSetting) def_%v_10 
		 4: %v_10->max_image_size_kb def_%v_11 %v_10[4.3,] 	 SYMBOL:	 ARGS:
		 5: %v_11->kilobytes def_%v_12 %v_11[4.4,] 	 SYMBOL:	 ARGS:
		 6: COPY TYPE_StringLiteral "sso-avatar" def_%v_13 
		 7: %v_9->download def_%v_14 %v_9[4.2,] avatar_url[2.5,] %v_12[4.5,] %v_13[4.6,] 	 SYMBOL:	 ARGS:avatar_url,%v_12,%v_13,Boolean,
		 8: COPY TYPE_PASS def_tempfile %v_14[4.7,] 
		 9: 
		 10: (FastImage) def_%v_15 
		 11: %v_15->type def_%v_16 %v_15[4.10,] %v_14[4.7,] 	 SYMBOL:	 ARGS:tempfile,
		 12: %v_16->to_s def_%v_17 %v_16[4.11,] 	 SYMBOL:	 ARGS:
		 13: COPY TYPE_PASS def_ext %v_17[4.12,] 
		 14: 
		 15: tempfile->rewind def_%v_18 tempfile[4.8,] 	 SYMBOL:	 ARGS:
		 16: 
		 17: (Upload) def_%v_19 
		 18: user->id def_%v_20 user[2.6,] 	 SYMBOL:	 ARGS:
		 19: COPY TYPE_StringLiteral "external-avatar." def_%v_21 
		 20: %v_21->+ def_%v_22 %v_21[4.19,] ext[4.13,] 	 SYMBOL:	 ARGS:ext,
		 21: (File) def_%v_23 
		 22: tempfile->path def_%v_24 tempfile[4.8,4.15,] 	 SYMBOL:	 ARGS:
		 23: %v_23->size def_%v_25 %v_23[4.21,] %v_24[4.22,] 	 SYMBOL:	 ARGS:%v_24,
		 24: COPY TYPE_StringLiteral "avatar" def_%v_26 
		 25: HASH-origin-image_type- def_%v_27 avatar_url[2.5,] %v_26[4.24,] 
		 26: %v_19->create_for def_%v_28 %v_19[4.17,] %v_20[4.18,] tempfile[4.8,4.15,4.22,] %v_22[4.20,] %v_25[4.23,] %v_27[4.25,] 	 SYMBOL:	 ARGS:%v_20,tempfile,%v_22,%v_25,%v_27,
		 27: COPY TYPE_PASS def_upload %v_28[4.26,] 
		 28: 
		 29: %v_28->id def_%v_29 %v_28[4.26,] 	 SYMBOL:	 ARGS:
		 30: ATTRASSIGN user->uploaded_avatar_id %v_29[4.29,] 
		 31: 
		 32: user->user_avatar def_%v_30 user[4.18,4.30,2.6,] 	 SYMBOL:	 ARGS:
		 33: BRANCH %v_30[4.32,] 
BB 5
	outgoing: 7 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_31 
		 1: 
BB 6
	outgoing: 7 17 
	datadep: 
	instructions:
		 0: 
		 1: user->build_user_avatar def_%v_32 user[4.30,2.6,] 	 SYMBOL:	 ARGS:
		 2: COPY TYPE_PASS def_%v_31 %v_32[6.1,] 
BB 7
	outgoing: 8 9 17 
	datadep: 
	instructions:
		 0: 
		 1: user->user_avatar def_%v_33 user[4.30,2.6,] 	 SYMBOL:	 ARGS:
		 2: upload->id def_%v_34 upload[4.27,] 	 SYMBOL:	 ARGS:
		 3: %v_33->contains_upload? def_%v_35 %v_33[7.1,] %v_34[7.2,] 	 SYMBOL:	 ARGS:%v_34,
		 4: %v_35->! def_%v_36 %v_35[7.3,] 	 SYMBOL:	 ARGS:
		 5: BRANCH %v_36[7.4,] 
BB 8
	outgoing: 10 17 
	datadep: 
	instructions:
		 0: 
		 1: user->user_avatar def_%v_37 user[4.30,2.6,] 	 SYMBOL:	 ARGS:
		 2: upload->id def_%v_38 upload[4.27,] 	 SYMBOL:	 ARGS:
		 3: ATTRASSIGN %v_37->custom_upload_id %v_38[8.2,] 
		 4: 
BB 9
	outgoing: 10 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_38 
BB 10
	outgoing: 11 17 
	datadep: 
	instructions:
		 0: COPY TYPE_PASS def_%v_8 %v_38[9.0,8.2,] 
		 1: %v_3[2.7,] 
BB 11
	outgoing: 12 13 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_PASS def_%v_4 tempfile[4.8,] 
		 2: BRANCH tempfile[4.8,] 
BB 12
	outgoing: 13 
	datadep: 
	instructions:
		 0: tempfile->respond_to? def_%v_5 tempfile[4.8,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 1: COPY TYPE_PASS def_%v_4 %v_5[12.0,] 
BB 13
	outgoing: 14 15 
	datadep: 
	instructions:
		 0: BRANCH %v_4[12.1,11.1,] 
BB 14
	outgoing: 16 
	datadep: 
	instructions:
		 0: tempfile->close! def_%v_6 tempfile[4.8,] 	 SYMBOL:	 ARGS:
		 1: 
BB 15
	outgoing: 16 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_6 
BB 16
	outgoing: 33 
	datadep: 
	instructions:
		 0: 
BB 17
	outgoing: 18 19 26 
	datadep: 
	instructions:
		 0: def_%v_39 
		 1: def_%v_40 %v_39[17.0,] 
		 2: BRANCH %v_40[17.1,] 
BB 18
	outgoing: 26 34 
	datadep: 
	instructions:
		 0: %v_39[17.0,] 
BB 19
	outgoing: 20 26 
	datadep: 
	instructions:
		 0: GLOBALVAR $! def_%v_41 
		 1: COPY TYPE_PASS def_e %v_41[19.0,] 
		 2: 
		 3: (Rails) def_%v_42 
		 4: %v_42->logger def_%v_43 %v_42[19.3,] 	 SYMBOL:	 ARGS:
		 5: COPY TYPE_StringLiteral ": Failed to download external avatar: " def_%v_44 
		 6: COPY TYPE_StringLiteral ", user id " def_%v_45 
		 7: user->id def_%v_46 user[4.30,2.6,] 	 SYMBOL:	 ARGS:
		 8: BUILDSTRING def_%v_47 e[19.1,] %v_44[19.5,] avatar_url[2.5,] %v_45[19.6,] %v_46[19.7,] 
		 9: %v_43->warn def_%v_48 %v_43[19.4,] %v_47[19.8,] 	 SYMBOL:	 ARGS:%v_47,
		 10: COPY TYPE_PASS def_%v_8 %v_48[19.9,] 
		 11: %v_3[2.7,] 
BB 20
	outgoing: 21 22 
	datadep: 
	instructions:
		 0: 
		 1: COPY TYPE_PASS def_%v_4 tempfile[4.8,] 
		 2: BRANCH tempfile[4.8,] 
BB 21
	outgoing: 22 
	datadep: 
	instructions:
		 0: tempfile->respond_to? def_%v_5 tempfile[4.8,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 1: COPY TYPE_PASS def_%v_4 %v_5[21.0,] 
BB 22
	outgoing: 23 24 
	datadep: 
	instructions:
		 0: BRANCH %v_4[21.1,20.1,] 
BB 23
	outgoing: 25 
	datadep: 
	instructions:
		 0: tempfile->close! def_%v_6 tempfile[4.8,] 	 SYMBOL:	 ARGS:
		 1: 
BB 24
	outgoing: 25 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_6 
BB 25
	outgoing: 33 
	datadep: 
	instructions:
		 0: 
BB 26
	outgoing: 28 29 
	datadep: 
	instructions:
		 0: def_%v_49 
		 1: def_%v_50 %v_49[26.0,] %v_3[2.7,] 
		 2: 
		 3: COPY TYPE_PASS def_%v_4 tempfile[4.8,] 
		 4: BRANCH tempfile[4.8,] 
BB 28
	outgoing: 29 
	datadep: 
	instructions:
		 0: tempfile->respond_to? def_%v_5 tempfile[4.8,] 	 SYMBOL:close!,	 ARGS:Symbol,
		 1: COPY TYPE_PASS def_%v_4 %v_5[28.0,] 
BB 29
	outgoing: 30 31 
	datadep: 
	instructions:
		 0: BRANCH %v_4[28.1,26.3,] 
BB 30
	outgoing: 32 
	datadep: 
	instructions:
		 0: tempfile->close! def_%v_6 tempfile[4.8,] 	 SYMBOL:	 ARGS:
		 1: 
BB 31
	outgoing: 32 
	datadep: 
	instructions:
		 0: COPY TYPE_Nil def_%v_6 
BB 32
	outgoing: 34 
	datadep: 
	instructions:
		 0: %v_49[26.0,] 
BB 33
	outgoing: 34 
	datadep: 
	instructions:
		 0: RETURN %v_8[10.0,19.10,] %self[2.0,] 
BB 34
	outgoing: 
	datadep: 
	instructions:

